2025-04-18 23:52:09,723 - INFO - [connect] Введены хосты: 192.168.1.74
2025-04-18 23:52:26,765 - INFO - [connect] Путь к ключу загружен из config.txt: /home/niggermain/.ssh/id_ed25519
2025-04-18 23:52:26,765 - INFO - [connect] Введены хосты: 192.168.1.74,192.168.1.70
2025-04-18 23:52:35,543 - INFO - [connect] 192.168.1.74 доступен по SSH
2025-04-18 23:52:40,550 - WARNING - [connect] 192.168.1.70 недоступен
2025-04-18 23:52:40,553 - ERROR - [error] Установка отменена: не все хосты доступны
2025-04-18 23:53:11,344 - INFO - [connect] Путь к ключу загружен из config.txt: /home/niggermain/.ssh/id_ed25519
2025-04-18 23:53:11,344 - INFO - [connect] Введены хосты: 192.168.1.74,192.168.1.70
2025-04-18 23:53:19,799 - INFO - [connect] 192.168.1.74 доступен по SSH
2025-04-18 23:53:19,814 - INFO - [connect] 192.168.1.70 доступен по SSH
2025-04-18 23:53:19,889 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-18 23:53:20,014 - INFO - Authentication (publickey) successful!
2025-04-18 23:53:20,633 - INFO - [status] 192.168.1.74 CPU: 3.51%, RAM: 34.54%
2025-04-18 23:53:20,667 - INFO - Connected (version 2.0, client OpenSSH_8.7)
2025-04-18 23:53:20,857 - INFO - Authentication (publickey) successful!
2025-04-18 23:53:21,256 - INFO - [status] 192.168.1.70 CPU: 8.22%, RAM: 32.27%
2025-04-18 23:53:21,261 - INFO - [status] Выбран сервер для установки: 192.168.1.74
2025-04-18 23:53:21,322 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-18 23:53:21,470 - INFO - Authentication (publickey) successful!
2025-04-18 23:53:21,686 - INFO - [install] Установка PostgreSQL на 192.168.1.74 (debian)
2025-04-18 23:53:21,686 - INFO - [install] Выполняется команда: sudo apt-get install -y lsb-release
2025-04-18 23:53:23,259 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет lsb-release самой новой версии (12.0-1).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-18 23:53:23,260 - INFO - [install] Выполняется команда: sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'
2025-04-18 23:53:23,394 - INFO - [install] Выполняется команда: wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
2025-04-18 23:53:26,684 - INFO - [install] OK
2025-04-18 23:53:26,687 - ERROR - [error] Warning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).
2025-04-18 23:53:26,687 - INFO - [install] Выполняется команда: sudo apt-get update
2025-04-18 23:53:31,716 - INFO - [install] Сущ:1 http://deb.debian.org/debian bookworm InRelease
Сущ:2 http://apt.postgresql.org/pub/repos/apt bookworm-pgdg InRelease
Сущ:3 http://deb.debian.org/debian bookworm-updates InRelease
Сущ:4 http://security.debian.org/debian-security bookworm-security InRelease
Чтение списков пакетов…
2025-04-18 23:53:31,717 - ERROR - [error] W: http://apt.postgresql.org/pub/repos/apt/dists/bookworm-pgdg/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.
2025-04-18 23:53:31,718 - INFO - [install] Выполняется команда: locale
2025-04-18 23:53:31,789 - INFO - [install] LANG=ru_RU.UTF-8
LANGUAGE=
LC_CTYPE="ru_RU.UTF-8"
LC_NUMERIC="ru_RU.UTF-8"
LC_TIME="ru_RU.UTF-8"
LC_COLLATE="ru_RU.UTF-8"
LC_MONETARY="ru_RU.UTF-8"
LC_MESSAGES="ru_RU.UTF-8"
LC_PAPER="ru_RU.UTF-8"
LC_NAME="ru_RU.UTF-8"
LC_ADDRESS="ru_RU.UTF-8"
LC_TELEPHONE="ru_RU.UTF-8"
LC_MEASUREMENT="ru_RU.UTF-8"
LC_IDENTIFICATION="ru_RU.UTF-8"
LC_ALL=
2025-04-18 23:53:31,789 - INFO - [install] Выполняется команда: export LC_CTYPE=ru_RU.UTF8
2025-04-18 23:53:31,883 - INFO - [install] Выполняется команда: export LC_COLLATE=ru_RU.UTF8
2025-04-18 23:53:31,980 - INFO - [install] Выполняется команда: locale -a | grep ru_RU
2025-04-18 23:53:32,067 - INFO - [install] ru_RU.utf8
2025-04-18 23:53:32,067 - INFO - [install] Выполняется команда: sudo locale-gen ru_RU.UTF8
2025-04-18 23:53:44,549 - INFO - [install] Generating locales (this might take a while)...
  ru_RU.UTF-8... done
Generation complete.
2025-04-18 23:53:44,550 - INFO - [install] Выполняется команда: sudo apt-get install -y postgresql-17
2025-04-18 23:53:46,170 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет postgresql-17 самой новой версии (17.4-1.pgdg120+2).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-18 23:53:46,171 - INFO - [install] Выполняется команда: sudo -u postgres psql -c 'SELECT version();'
2025-04-18 23:53:46,452 - INFO - [install] version                                                       
---------------------------------------------------------------------------------------------------------------------
 PostgreSQL 17.4 (Debian 17.4-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
(1 строка)
2025-04-18 23:53:46,454 - INFO - [install] Настройка доступа к PostgreSQL с 192.168.1.70
2025-04-18 23:56:50,612 - INFO - [connect] Путь к ключу загружен из config.txt: /home/niggermain/.ssh/id_ed25519
2025-04-18 23:56:50,612 - INFO - [connect] Введены хосты: 192.168.1.74,192.168.1.70
2025-04-18 23:56:55,378 - INFO - [connect] 192.168.1.74 доступен по SSH
2025-04-18 23:56:55,386 - INFO - [connect] 192.168.1.70 доступен по SSH
2025-04-18 23:56:55,449 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-18 23:56:55,668 - INFO - Authentication (publickey) successful!
2025-04-18 23:56:56,290 - INFO - [status] 192.168.1.74 CPU: 3.53%, RAM: 34.70%
2025-04-18 23:56:56,357 - INFO - Connected (version 2.0, client OpenSSH_8.7)
2025-04-18 23:56:56,548 - INFO - Authentication (publickey) successful!
2025-04-18 23:56:56,976 - INFO - [status] 192.168.1.70 CPU: 5.31%, RAM: 32.02%
2025-04-18 23:56:56,982 - INFO - [status] Выбран сервер для установки: 192.168.1.70
2025-04-18 23:56:57,007 - INFO - Connected (version 2.0, client OpenSSH_8.7)
2025-04-18 23:56:57,177 - INFO - Authentication (publickey) successful!
2025-04-18 23:56:57,336 - INFO - [install] Установка PostgreSQL на 192.168.1.70 (alma)
2025-04-18 23:56:57,336 - INFO - [install] Выполняется команда: sudo dnf install -y https://download.postgresql.org/pub/repos/yum/reporpms/EL-9-x86_64/pgdg-redhat-repo-latest.noarch.rpm
2025-04-18 23:57:03,633 - INFO - [install] AlmaLinux 9 - AppStream                         4.5 kB/s | 4.2 kB     00:00    
AlmaLinux 9 - BaseOS                            6.9 kB/s | 3.8 kB     00:00    
AlmaLinux 9 - Extras                            5.8 kB/s | 3.3 kB     00:00    
pgdg-redhat-repo-latest.noarch.rpm               51 kB/s |  12 kB     00:00    
Пакет pgdg-redhat-repo-42.0-50PGDG.noarch уже установлен.
Зависимости разрешены.
Отсутствуют действия для выполнения.
Выполнено!
2025-04-18 23:57:03,634 - INFO - [install] Выполняется команда: sudo dnf install -y postgresql17-server
2025-04-18 23:57:05,353 - INFO - [install] Последняя проверка окончания срока действия метаданных: 0:00:02 назад, Пт 18 апр 2025 23:57:02.
Пакет postgresql17-server-17.4-1PGDG.rhel9.x86_64 уже установлен.
Зависимости разрешены.
Отсутствуют действия для выполнения.
Выполнено!
2025-04-18 23:57:05,353 - INFO - [install] Выполняется команда: sudo /usr/pgsql-17/bin/postgresql-17-setup initdb
2025-04-18 23:57:05,926 - INFO - [install] Data directory is not empty!
2025-04-18 23:57:05,926 - ERROR - [error] Команда завершилась с кодом 1
2025-04-18 23:57:05,926 - INFO - [install] Выполняется команда: sudo systemctl enable postgresql-17
2025-04-18 23:57:06,487 - INFO - [install] Выполняется команда: sudo systemctl start postgresql-17
2025-04-18 23:57:06,632 - INFO - [install] Выполняется команда: sudo -u postgres psql -c 'SELECT version();'
2025-04-18 23:57:07,138 - INFO - [install] version                                                  
----------------------------------------------------------------------------------------------------------
 PostgreSQL 17.4 on x86_64-pc-linux-gnu, compiled by gcc (GCC) 11.5.0 20240719 (Red Hat 11.5.0-5), 64-bit
(1 строка)
2025-04-18 23:57:07,140 - INFO - [install] Настройка доступа к PostgreSQL с 192.168.1.74
2025-04-18 23:57:15,346 - INFO - [connect] Путь к ключу загружен из config.txt: /home/niggermain/.ssh/id_ed25519
2025-04-18 23:57:15,346 - INFO - [connect] Введены хосты: 192.168.1.74,192.168.1.70
2025-04-18 23:57:19,112 - INFO - [connect] 192.168.1.74 доступен по SSH
2025-04-18 23:57:19,115 - INFO - [connect] 192.168.1.70 доступен по SSH
2025-04-18 23:57:19,198 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-18 23:57:19,317 - INFO - Authentication (publickey) successful!
2025-04-18 23:57:19,942 - INFO - [status] 192.168.1.74 CPU: 3.53%, RAM: 34.23%
2025-04-18 23:57:19,962 - INFO - Connected (version 2.0, client OpenSSH_8.7)
2025-04-18 23:57:20,122 - INFO - Authentication (publickey) successful!
2025-04-18 23:57:20,561 - INFO - [status] 192.168.1.70 CPU: 5.44%, RAM: 32.64%
2025-04-18 23:57:20,566 - INFO - [status] Выбран сервер для установки: 192.168.1.74
2025-04-18 23:57:20,633 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-18 23:57:20,769 - INFO - Authentication (publickey) successful!
2025-04-18 23:57:20,931 - INFO - [install] Установка PostgreSQL на 192.168.1.74 (debian)
2025-04-18 23:57:20,931 - INFO - [install] Выполняется команда: sudo apt-get install -y lsb-release
2025-04-18 23:57:22,456 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет lsb-release самой новой версии (12.0-1).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-18 23:57:22,457 - INFO - [install] Выполняется команда: sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'
2025-04-18 23:57:22,633 - INFO - [install] Выполняется команда: wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
2025-04-18 23:57:25,604 - INFO - [install] OK
2025-04-18 23:57:25,606 - ERROR - [error] Warning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).
2025-04-18 23:57:25,607 - INFO - [install] Выполняется команда: sudo apt-get update
2025-04-18 23:57:30,183 - INFO - [install] Сущ:1 http://apt.postgresql.org/pub/repos/apt bookworm-pgdg InRelease
Сущ:2 http://deb.debian.org/debian bookworm InRelease
Сущ:3 http://security.debian.org/debian-security bookworm-security InRelease
Сущ:4 http://deb.debian.org/debian bookworm-updates InRelease
Чтение списков пакетов…
2025-04-18 23:57:30,187 - ERROR - [error] W: http://apt.postgresql.org/pub/repos/apt/dists/bookworm-pgdg/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.
2025-04-18 23:57:30,187 - INFO - [install] Выполняется команда: locale
2025-04-18 23:57:30,308 - INFO - [install] LANG=ru_RU.UTF-8
LANGUAGE=
LC_CTYPE="ru_RU.UTF-8"
LC_NUMERIC="ru_RU.UTF-8"
LC_TIME="ru_RU.UTF-8"
LC_COLLATE="ru_RU.UTF-8"
LC_MONETARY="ru_RU.UTF-8"
LC_MESSAGES="ru_RU.UTF-8"
LC_PAPER="ru_RU.UTF-8"
LC_NAME="ru_RU.UTF-8"
LC_ADDRESS="ru_RU.UTF-8"
LC_TELEPHONE="ru_RU.UTF-8"
LC_MEASUREMENT="ru_RU.UTF-8"
LC_IDENTIFICATION="ru_RU.UTF-8"
LC_ALL=
2025-04-18 23:57:30,308 - INFO - [install] Выполняется команда: export LC_CTYPE=ru_RU.UTF8
2025-04-18 23:57:30,383 - INFO - [install] Выполняется команда: export LC_COLLATE=ru_RU.UTF8
2025-04-18 23:57:30,583 - INFO - [install] Выполняется команда: locale -a | grep ru_RU
2025-04-18 23:57:30,741 - INFO - [install] ru_RU.utf8
2025-04-18 23:57:30,742 - INFO - [install] Выполняется команда: sudo locale-gen ru_RU.UTF8
2025-04-18 23:57:43,271 - INFO - [install] Generating locales (this might take a while)...
  ru_RU.UTF-8... done
Generation complete.
2025-04-18 23:57:43,271 - INFO - [install] Выполняется команда: sudo apt-get install -y postgresql-17
2025-04-18 23:57:45,124 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет postgresql-17 самой новой версии (17.4-1.pgdg120+2).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-18 23:57:45,124 - INFO - [install] Выполняется команда: sudo -u postgres psql -c 'SELECT version();'
2025-04-18 23:57:45,405 - INFO - [install] version                                                       
---------------------------------------------------------------------------------------------------------------------
 PostgreSQL 17.4 (Debian 17.4-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
(1 строка)
2025-04-18 23:57:45,407 - INFO - [install] Настройка доступа к PostgreSQL с 192.168.1.70
2025-04-18 23:57:45,407 - INFO - [install] Выполняется команда: sudo sed -i "s/^#listen_addresses =.*/listen_addresses = '*'" /etc/postgresql/17/main/postgresql.conf || sudo sed -i "s/^#listen_addresses =.*/listen_addresses = '*'" /var/lib/pgsql/17/data/postgresql.conf
2025-04-18 23:57:45,591 - ERROR - [error] sed: -e выражение #1, символ 47: незавершенная команда `s'
sed: -e выражение #1, символ 47: незавершенная команда `s'
2025-04-18 23:57:45,592 - ERROR - [error] Команда завершилась с кодом 1
2025-04-18 23:57:45,592 - INFO - [install] Выполняется команда: echo "host    all             student         192.168.1.70/32         md5" | sudo tee -a /etc/postgresql/17/main/pg_hba.conf || echo "host    all             student         192.168.1.70/32         md5" | sudo tee -a /var/lib/pgsql/17/data/pg_hba.conf
2025-04-18 23:57:45,802 - INFO - [install] host    all             student         192.168.1.70/32         md5
2025-04-18 23:57:45,802 - INFO - [install] Выполняется команда: sudo -u postgres psql -tc "SELECT 1 FROM pg_roles WHERE rolname='student'" | grep -q 1 || sudo -u postgres psql -c "CREATE ROLE student LOGIN PASSWORD 'student';"
2025-04-18 23:57:46,577 - INFO - [install] CREATE ROLE
2025-04-18 23:57:46,578 - INFO - [install] Выполняется команда: sudo systemctl restart postgresql-17 || sudo systemctl restart postgresql
2025-04-18 23:57:51,470 - ERROR - [error] Failed to restart postgresql-17.service: Unit postgresql-17.service not found.
2025-04-18 23:57:51,473 - INFO - [install] Установка завершена успешно
2025-04-18 23:57:51,525 - INFO - Connected (version 2.0, client OpenSSH_8.7)
2025-04-18 23:57:51,712 - INFO - Authentication (publickey) successful!
2025-04-18 23:57:51,715 - INFO - [install] Проверка подключения student@192.168.1.74 с 192.168.1.70
2025-04-18 23:57:55,234 - ERROR - [error] Ошибка подключения student: psql: ошибка: подключиться к серверу "192.168.1.74", порту 5432 не удалось: В соединении отказано
	Сервер действительно работает по данному адресу и принимает TCP-соединения?
2025-04-19 00:01:44,668 - INFO - [connect] Путь к ключу загружен из config.txt: /home/niggermain/.ssh/id_ed25519
2025-04-19 00:01:44,669 - INFO - [connect] Введены хосты: 192.168.1.74,192.168.1.70
2025-04-19 00:01:48,487 - INFO - [connect] 192.168.1.74 доступен по SSH
2025-04-19 00:01:48,490 - INFO - [connect] 192.168.1.70 доступен по SSH
2025-04-19 00:01:48,576 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 00:01:48,824 - INFO - Authentication (publickey) successful!
2025-04-19 00:01:49,434 - INFO - [status] 192.168.1.74 CPU: 3.54%, RAM: 34.81%
2025-04-19 00:01:49,452 - INFO - Connected (version 2.0, client OpenSSH_8.7)
2025-04-19 00:01:49,642 - INFO - Authentication (publickey) successful!
2025-04-19 00:01:50,077 - INFO - [status] 192.168.1.70 CPU: 3.91%, RAM: 32.08%
2025-04-19 00:01:50,085 - INFO - [status] Выбран сервер для установки: 192.168.1.70
2025-04-19 00:01:50,110 - INFO - Connected (version 2.0, client OpenSSH_8.7)
2025-04-19 00:01:50,258 - INFO - Authentication (publickey) successful!
2025-04-19 00:01:50,416 - INFO - [install] Установка PostgreSQL на 192.168.1.70 (alma)
2025-04-19 00:01:50,417 - INFO - [install] Выполняется команда: sudo dnf install -y https://download.postgresql.org/pub/repos/yum/reporpms/EL-9-x86_64/pgdg-redhat-repo-latest.noarch.rpm
2025-04-19 00:01:52,176 - INFO - [install] Последняя проверка окончания срока действия метаданных: 0:04:49 назад, Пт 18 апр 2025 23:57:02.
pgdg-redhat-repo-latest.noarch.rpm               36 kB/s |  12 kB     00:00    
Пакет pgdg-redhat-repo-42.0-50PGDG.noarch уже установлен.
Зависимости разрешены.
Отсутствуют действия для выполнения.
Выполнено!
2025-04-19 00:01:52,177 - INFO - [install] Выполняется команда: sudo dnf install -y postgresql17-server
2025-04-19 00:01:53,506 - INFO - [install] Последняя проверка окончания срока действия метаданных: 0:04:50 назад, Пт 18 апр 2025 23:57:02.
Пакет postgresql17-server-17.4-1PGDG.rhel9.x86_64 уже установлен.
Зависимости разрешены.
Отсутствуют действия для выполнения.
Выполнено!
2025-04-19 00:01:53,506 - INFO - [install] Выполняется команда: sudo /usr/pgsql-17/bin/postgresql-17-setup initdb
2025-04-19 00:01:53,671 - INFO - [install] Data directory is not empty!
2025-04-19 00:01:53,671 - ERROR - [error] Команда завершилась с кодом 1
2025-04-19 00:01:53,671 - INFO - [install] Выполняется команда: sudo systemctl enable postgresql-17
2025-04-19 00:01:54,290 - INFO - [install] Выполняется команда: sudo systemctl start postgresql-17
2025-04-19 00:01:54,424 - INFO - [install] Выполняется команда: sudo -u postgres psql -c 'SELECT version();'
2025-04-19 00:01:54,568 - INFO - [install] version                                                  
----------------------------------------------------------------------------------------------------------
 PostgreSQL 17.4 on x86_64-pc-linux-gnu, compiled by gcc (GCC) 11.5.0 20240719 (Red Hat 11.5.0-5), 64-bit
(1 строка)
2025-04-19 00:01:54,570 - INFO - [install] Настройка доступа к PostgreSQL с 192.168.1.74
2025-04-19 00:01:54,570 - INFO - [install] Выполняется команда: sudo sed -i "s/^#listen_addresses =.*/listen_addresses = '*'" /etc/postgresql/17/main/postgresql.conf/s || sudo sed -i "s/^#listen_addresses =.*/listen_addresses = '*'" /var/lib/pgsql/17/data/postgresql.conf/s
2025-04-19 00:01:54,798 - ERROR - [error] sed: -e выражение #1, символ 47: незавершенная команда `s'
sed: -e выражение #1, символ 47: незавершенная команда `s'
2025-04-19 00:01:54,798 - ERROR - [error] Команда завершилась с кодом 1
2025-04-19 00:01:54,799 - INFO - [install] Выполняется команда: echo "host    all             student         192.168.1.74/32         md5" | sudo tee -a /etc/postgresql/17/main/pg_hba.conf || echo "host    all             student         192.168.1.74/32         md5" | sudo tee -a /var/lib/pgsql/17/data/pg_hba.conf
2025-04-19 00:01:55,052 - INFO - [install] host    all             student         192.168.1.74/32         md5
host    all             student         192.168.1.74/32         md5
2025-04-19 00:01:55,054 - ERROR - [error] tee: /etc/postgresql/17/main/pg_hba.conf: Нет такого файла или каталога
2025-04-19 00:01:55,054 - INFO - [install] Выполняется команда: sudo -u postgres psql -tc "SELECT 1 FROM pg_roles WHERE rolname='student'" | grep -q 1 || sudo -u postgres psql -c "CREATE ROLE student LOGIN PASSWORD 'student';"
2025-04-19 00:01:55,552 - INFO - [install] CREATE ROLE
2025-04-19 00:01:55,552 - INFO - [install] Выполняется команда: sudo systemctl restart postgresql-17 || sudo systemctl restart postgresql
2025-04-19 00:01:56,194 - INFO - [install] Установка завершена успешно
2025-04-19 00:01:56,283 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 00:01:56,482 - INFO - Authentication (publickey) successful!
2025-04-19 00:01:56,485 - INFO - [install] Проверка подключения student@192.168.1.70 с 192.168.1.74
2025-04-19 00:01:56,824 - ERROR - [error] Ошибка подключения student: psql: ошибка: подключиться к серверу "192.168.1.70", порту 5432 не удалось: Нет маршрута до узла
	Сервер действительно работает по данному адресу и принимает TCP-соединения?
2025-04-19 00:04:21,477 - INFO - [connect] Путь к ключу загружен из config.txt: /home/niggermain/.ssh/id_ed25519
2025-04-19 00:04:21,477 - INFO - [connect] Введены хосты: 192.168.1.74,192.168.1.70
2025-04-19 00:04:24,778 - INFO - [connect] 192.168.1.74 доступен по SSH
2025-04-19 00:04:24,783 - INFO - [connect] 192.168.1.70 доступен по SSH
2025-04-19 00:04:24,857 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 00:04:24,997 - INFO - Authentication (publickey) successful!
2025-04-19 00:04:25,677 - INFO - [status] 192.168.1.74 CPU: 3.53%, RAM: 34.15%
2025-04-19 00:04:25,695 - INFO - Connected (version 2.0, client OpenSSH_8.7)
2025-04-19 00:04:25,873 - INFO - Authentication (publickey) successful!
2025-04-19 00:04:26,315 - INFO - [status] 192.168.1.70 CPU: 3.47%, RAM: 31.80%
2025-04-19 00:04:26,320 - INFO - [status] Выбран сервер для установки: 192.168.1.70
2025-04-19 00:04:26,339 - INFO - Connected (version 2.0, client OpenSSH_8.7)
2025-04-19 00:04:26,505 - INFO - Authentication (publickey) successful!
2025-04-19 00:04:26,668 - INFO - [install] Установка PostgreSQL на 192.168.1.70 (alma)
2025-04-19 00:04:26,668 - INFO - [install] Выполняется команда: sudo dnf install -y https://download.postgresql.org/pub/repos/yum/reporpms/EL-9-x86_64/pgdg-redhat-repo-latest.noarch.rpm
2025-04-19 00:04:28,394 - INFO - [install] Последняя проверка окончания срока действия метаданных: 0:07:25 назад, Пт 18 апр 2025 23:57:02.
pgdg-redhat-repo-latest.noarch.rpm               38 kB/s |  12 kB     00:00    
Пакет pgdg-redhat-repo-42.0-50PGDG.noarch уже установлен.
Зависимости разрешены.
Отсутствуют действия для выполнения.
Выполнено!
2025-04-19 00:04:28,395 - INFO - [install] Выполняется команда: sudo dnf install -y postgresql17-server
2025-04-19 00:04:29,723 - INFO - [install] Последняя проверка окончания срока действия метаданных: 0:07:27 назад, Пт 18 апр 2025 23:57:02.
Пакет postgresql17-server-17.4-1PGDG.rhel9.x86_64 уже установлен.
Зависимости разрешены.
Отсутствуют действия для выполнения.
Выполнено!
2025-04-19 00:04:29,723 - INFO - [install] Выполняется команда: sudo /usr/pgsql-17/bin/postgresql-17-setup initdb
2025-04-19 00:04:29,862 - INFO - [install] Data directory is not empty!
2025-04-19 00:04:29,863 - ERROR - [error] Команда завершилась с кодом 1
2025-04-19 00:04:29,863 - INFO - [install] Выполняется команда: sudo systemctl enable postgresql-17
2025-04-19 00:04:30,374 - INFO - [install] Выполняется команда: sudo systemctl start postgresql-17
2025-04-19 00:04:30,535 - INFO - [install] Выполняется команда: sudo -u postgres psql -c 'SELECT version();'
2025-04-19 00:04:30,706 - INFO - [install] version                                                  
----------------------------------------------------------------------------------------------------------
 PostgreSQL 17.4 on x86_64-pc-linux-gnu, compiled by gcc (GCC) 11.5.0 20240719 (Red Hat 11.5.0-5), 64-bit
(1 строка)
2025-04-19 00:04:30,708 - INFO - [install] Настройка доступа к PostgreSQL с 192.168.1.74
2025-04-19 00:04:30,708 - INFO - [install] Выполняется команда: sudo sed -i "s/^#listen_addresses =.*/listen_addresses = '*'" /etc/postgresql/17/main/postgresql.conf/s || sudo sed -i "s/^#listen_addresses =.*/listen_addresses = '*'" /var/lib/pgsql/17/data/postgresql.conf/s
2025-04-19 00:04:30,896 - ERROR - [error] sed: -e выражение #1, символ 47: незавершенная команда `s'
sed: -e выражение #1, символ 47: незавершенная команда `s'
2025-04-19 00:04:30,897 - ERROR - [error] Команда завершилась с кодом 1
2025-04-19 00:04:30,897 - INFO - [install] Выполняется команда: echo "host    all             student         192.168.1.74/5432         md5" | sudo tee -a /etc/postgresql/17/main/pg_hba.conf || echo "host    all             student         192.168.1.74/32         md5" | sudo tee -a /var/lib/pgsql/17/data/pg_hba.conf
2025-04-19 00:04:31,078 - INFO - [install] host    all             student         192.168.1.74/5432         md5
host    all             student         192.168.1.74/32         md5
2025-04-19 00:04:31,080 - ERROR - [error] tee: /etc/postgresql/17/main/pg_hba.conf: Нет такого файла или каталога
2025-04-19 00:04:31,080 - INFO - [install] Выполняется команда: sudo -u postgres psql -tc "SELECT 1 FROM pg_roles WHERE rolname='student'" | grep -q 1 || sudo -u postgres psql -c "CREATE ROLE student LOGIN PASSWORD 'student';"
2025-04-19 00:04:31,251 - INFO - [install] Выполняется команда: sudo systemctl restart postgresql-17 || sudo systemctl restart postgresql
2025-04-19 00:04:32,089 - INFO - [install] Установка завершена успешно
2025-04-19 00:04:32,150 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 00:04:32,281 - INFO - Authentication (publickey) successful!
2025-04-19 00:04:32,286 - INFO - [install] Проверка подключения student@192.168.1.70 с 192.168.1.74
2025-04-19 00:04:32,619 - ERROR - [error] Ошибка подключения student: psql: ошибка: подключиться к серверу "192.168.1.70", порту 5432 не удалось: Нет маршрута до узла
	Сервер действительно работает по данному адресу и принимает TCP-соединения?
2025-04-19 00:09:33,326 - INFO - [connect] Путь к ключу загружен из config.txt: /home/niggermain/.ssh/id_ed25519
2025-04-19 00:09:33,326 - INFO - [connect] Введены хосты: 192.168.1.74,192.168.1.70
2025-04-19 00:09:36,364 - INFO - [connect] 192.168.1.74 доступен по SSH
2025-04-19 00:09:36,369 - INFO - [connect] 192.168.1.70 доступен по SSH
2025-04-19 00:09:36,442 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 00:09:36,621 - INFO - Authentication (publickey) successful!
2025-04-19 00:09:37,257 - INFO - [status] 192.168.1.74 CPU: 3.51%, RAM: 34.41%
2025-04-19 00:09:37,281 - INFO - Connected (version 2.0, client OpenSSH_8.7)
2025-04-19 00:09:37,432 - INFO - Authentication (publickey) successful!
2025-04-19 00:09:37,903 - INFO - [status] 192.168.1.70 CPU: 6.00%, RAM: 32.64%
2025-04-19 00:09:37,907 - INFO - [status] Выбран сервер для установки: 192.168.1.74
2025-04-19 00:09:37,968 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 00:09:38,100 - INFO - Authentication (publickey) successful!
2025-04-19 00:09:38,346 - INFO - [install] Установка PostgreSQL на 192.168.1.74 (debian)
2025-04-19 00:09:38,346 - INFO - [install] Выполняется команда: sudo apt-get install -y lsb-release
2025-04-19 00:09:39,914 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет lsb-release самой новой версии (12.0-1).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-19 00:09:39,915 - INFO - [install] Выполняется команда: sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'
2025-04-19 00:09:40,044 - INFO - [install] Выполняется команда: wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
2025-04-19 00:09:42,671 - INFO - [install] OK
2025-04-19 00:09:42,672 - ERROR - [error] Warning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).
2025-04-19 00:09:42,672 - INFO - [install] Выполняется команда: sudo apt-get update
2025-04-19 00:09:47,369 - INFO - [install] Сущ:1 http://apt.postgresql.org/pub/repos/apt bookworm-pgdg InRelease
Сущ:2 http://deb.debian.org/debian bookworm InRelease
Сущ:3 http://security.debian.org/debian-security bookworm-security InRelease
Сущ:4 http://deb.debian.org/debian bookworm-updates InRelease
Чтение списков пакетов…
2025-04-19 00:09:47,373 - ERROR - [error] W: http://apt.postgresql.org/pub/repos/apt/dists/bookworm-pgdg/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.
2025-04-19 00:09:47,373 - INFO - [install] Выполняется команда: locale
2025-04-19 00:09:47,536 - INFO - [install] LANG=ru_RU.UTF-8
LANGUAGE=
LC_CTYPE="ru_RU.UTF-8"
LC_NUMERIC="ru_RU.UTF-8"
LC_TIME="ru_RU.UTF-8"
LC_COLLATE="ru_RU.UTF-8"
LC_MONETARY="ru_RU.UTF-8"
LC_MESSAGES="ru_RU.UTF-8"
LC_PAPER="ru_RU.UTF-8"
LC_NAME="ru_RU.UTF-8"
LC_ADDRESS="ru_RU.UTF-8"
LC_TELEPHONE="ru_RU.UTF-8"
LC_MEASUREMENT="ru_RU.UTF-8"
LC_IDENTIFICATION="ru_RU.UTF-8"
LC_ALL=
2025-04-19 00:09:47,536 - INFO - [install] Выполняется команда: export LC_CTYPE=ru_RU.UTF8
2025-04-19 00:09:47,623 - INFO - [install] Выполняется команда: export LC_COLLATE=ru_RU.UTF8
2025-04-19 00:09:47,722 - INFO - [install] Выполняется команда: locale -a | grep ru_RU
2025-04-19 00:09:47,828 - INFO - [install] ru_RU.utf8
2025-04-19 00:09:47,828 - INFO - [install] Выполняется команда: sudo locale-gen ru_RU.UTF8
2025-04-19 00:10:00,257 - INFO - [install] Generating locales (this might take a while)...
  ru_RU.UTF-8... done
Generation complete.
2025-04-19 00:10:00,257 - INFO - [install] Выполняется команда: sudo apt-get install -y postgresql-17
2025-04-19 00:10:01,846 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет postgresql-17 самой новой версии (17.4-1.pgdg120+2).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-19 00:10:01,846 - INFO - [install] Выполняется команда: sudo -u postgres psql -c 'SELECT version();'
2025-04-19 00:10:02,200 - INFO - [install] version                                                       
---------------------------------------------------------------------------------------------------------------------
 PostgreSQL 17.4 (Debian 17.4-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
(1 строка)
2025-04-19 00:10:02,202 - INFO - [install] Настройка доступа к PostgreSQL с 192.168.1.70
2025-04-19 00:10:02,203 - INFO - [install] Выполняется команда: sudo sed -i "s/^#listen_addresses =.*/listen_addresses = '*'" /etc/postgresql/17/main/postgresql.conf/s || sudo sed -i "s/^#listen_addresses =.*/listen_addresses = '*'" /var/lib/pgsql/17/data/postgresql.conf/s
2025-04-19 00:10:02,340 - ERROR - [error] sed: -e выражение #1, символ 47: незавершенная команда `s'
sed: -e выражение #1, символ 47: незавершенная команда `s'
2025-04-19 00:10:02,341 - ERROR - [error] Команда завершилась с кодом 1
2025-04-19 00:10:02,341 - INFO - [install] Выполняется команда: echo "host    all             student         192.168.1.70/5432         md5" | sudo tee -a /etc/postgresql/17/main/pg_hba.conf || echo "host    all             student         192.168.1.70/32         md5" | sudo tee -a /var/lib/pgsql/17/data/pg_hba.conf
2025-04-19 00:10:02,454 - INFO - [install] host    all             student         192.168.1.70/5432         md5
2025-04-19 00:10:02,454 - INFO - [install] Выполняется команда: sudo -u postgres psql -tc "SELECT 1 FROM pg_roles WHERE rolname='student'" | grep -q 1 || sudo -u postgres psql -c "CREATE ROLE student LOGIN PASSWORD 'student';"
2025-04-19 00:10:02,997 - INFO - [install] Выполняется команда: sudo systemctl restart postgresql-17 || sudo systemctl restart postgresql
2025-04-19 00:10:04,430 - ERROR - [error] Failed to restart postgresql-17.service: Unit postgresql-17.service not found.
2025-04-19 00:10:04,432 - INFO - [install] Установка завершена успешно
2025-04-19 00:10:04,538 - INFO - Connected (version 2.0, client OpenSSH_8.7)
2025-04-19 00:10:04,793 - INFO - Authentication (publickey) successful!
2025-04-19 00:10:04,796 - INFO - [install] Проверка подключения student@192.168.1.74 с 192.168.1.70
2025-04-19 00:10:05,255 - ERROR - [error] Ошибка подключения student: psql: ошибка: подключиться к серверу "192.168.1.74", порту 5432 не удалось: В соединении отказано
	Сервер действительно работает по данному адресу и принимает TCP-соединения?
2025-04-19 00:15:02,198 - INFO - [connect] Путь к ключу загружен из config.txt: /home/niggermain/.ssh/id_ed25519
2025-04-19 00:15:02,198 - INFO - [connect] Введены хосты: 192.168.1.74,192.168.1.70
2025-04-19 00:15:05,514 - INFO - [connect] 192.168.1.74 доступен по SSH
2025-04-19 00:15:05,526 - INFO - [connect] 192.168.1.70 доступен по SSH
2025-04-19 00:15:05,594 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 00:15:05,813 - INFO - Authentication (publickey) successful!
2025-04-19 00:15:06,433 - INFO - [status] 192.168.1.74 CPU: 3.52%, RAM: 34.04%
2025-04-19 00:15:06,513 - INFO - Connected (version 2.0, client OpenSSH_8.7)
2025-04-19 00:15:06,856 - INFO - Authentication (publickey) successful!
2025-04-19 00:15:07,317 - INFO - [status] 192.168.1.70 CPU: 4.06%, RAM: 32.56%
2025-04-19 00:15:07,322 - INFO - [status] Выбран сервер для установки: 192.168.1.70
2025-04-19 00:15:07,400 - INFO - Connected (version 2.0, client OpenSSH_8.7)
2025-04-19 00:15:07,613 - INFO - Authentication (publickey) successful!
2025-04-19 00:15:07,770 - INFO - [install] Установка PostgreSQL на 192.168.1.70 (alma)
2025-04-19 00:15:07,770 - INFO - [install] Выполняется команда: sudo dnf install -y https://download.postgresql.org/pub/repos/yum/reporpms/EL-9-x86_64/pgdg-redhat-repo-latest.noarch.rpm
2025-04-19 00:15:09,601 - INFO - [install] Последняя проверка окончания срока действия метаданных: 0:18:06 назад, Пт 18 апр 2025 23:57:02.
pgdg-redhat-repo-latest.noarch.rpm               47 kB/s |  12 kB     00:00    
Пакет pgdg-redhat-repo-42.0-50PGDG.noarch уже установлен.
Зависимости разрешены.
Отсутствуют действия для выполнения.
Выполнено!
2025-04-19 00:15:09,602 - INFO - [install] Выполняется команда: sudo dnf install -y postgresql17-server
2025-04-19 00:15:11,021 - INFO - [install] Последняя проверка окончания срока действия метаданных: 0:18:08 назад, Пт 18 апр 2025 23:57:02.
Пакет postgresql17-server-17.4-1PGDG.rhel9.x86_64 уже установлен.
Зависимости разрешены.
Отсутствуют действия для выполнения.
Выполнено!
2025-04-19 00:15:11,021 - INFO - [install] Выполняется команда: sudo /usr/pgsql-17/bin/postgresql-17-setup initdb
2025-04-19 00:15:11,226 - INFO - [install] Data directory is not empty!
2025-04-19 00:15:11,226 - ERROR - [error] Команда завершилась с кодом 1
2025-04-19 00:15:11,227 - INFO - [install] Выполняется команда: sudo systemctl enable postgresql-17
2025-04-19 00:15:11,747 - INFO - [install] Выполняется команда: sudo systemctl start postgresql-17
2025-04-19 00:15:12,012 - INFO - [install] Выполняется команда: sudo -u postgres psql -c 'SELECT version();'
2025-04-19 00:15:12,265 - INFO - [install] version                                                  
----------------------------------------------------------------------------------------------------------
 PostgreSQL 17.4 on x86_64-pc-linux-gnu, compiled by gcc (GCC) 11.5.0 20240719 (Red Hat 11.5.0-5), 64-bit
(1 строка)
2025-04-19 00:15:12,267 - INFO - [install] Настройка доступа к PostgreSQL с 192.168.1.74
2025-04-19 00:15:12,267 - INFO - [install] Выполняется команда: sudo sed -i 's/^#listen_addresses =.*/listen_addresses = \"*\"/' /etc/postgresql/17/main/postgresql.conf || sudo sed -i 's/^#listen_addresses =.*/listen_addresses = \"*\"/' /var/lib/pgsql/17/data/postgresql.confecho "host    all             student         192.168.1.74/32         md5" | sudo tee -a /etc/postgresql/17/main/pg_hba.conf || echo "host    all             student         192.168.1.74/32         md5" | sudo tee -a /var/lib/pgsql/17/data/pg_hba.confsudo -u postgres psql -tc "SELECT 1 FROM pg_roles WHERE rolname='student'" | grep -q 1 || sudo -u postgres psql -c "CREATE ROLE student LOGIN PASSWORD 'student';"sudo systemctl restart postgresql || sudo systemctl restart postgresql
2025-04-19 00:15:12,632 - ERROR - [error] sed: невозможно прочитать /etc/postgresql/17/main/postgresql.conf: Нет такого файла или каталога
tee: /etc/postgresql/17/main/pg_hba.conf: Нет такого файла или каталога
sed: невозможно прочитать /var/lib/pgsql/17/data/postgresql.confecho: Нет такого файла или каталога
sed: невозможно прочитать host    all             student         192.168.1.74/32         md5: Нет такого файла или каталога
tee: неверный ключ — «u»
По команде «tee --help» можно получить дополнительную информацию.
psql: предупреждение: лишний аргумент "postgresql" проигнорирован
psql: ошибка: подключиться к серверу через сокет "/run/postgresql/.s.PGSQL.5432" не удалось: ВАЖНО:  пользователь "restart" не прошёл проверку подлинности (Peer)
Failed to restart postgresql.service: Unit postgresql.service not found.
2025-04-19 00:15:12,633 - ERROR - [error] Команда завершилась с кодом 5
2025-04-19 00:15:12,634 - INFO - [install] Установка завершена успешно
2025-04-19 00:15:12,706 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 00:15:12,838 - INFO - Authentication (publickey) successful!
2025-04-19 00:15:12,840 - INFO - [install] Проверка подключения student@192.168.1.70 с 192.168.1.74
2025-04-19 00:15:13,167 - ERROR - [error] Ошибка подключения student: psql: ошибка: подключиться к серверу "192.168.1.70", порту 5432 не удалось: Нет маршрута до узла
	Сервер действительно работает по данному адресу и принимает TCP-соединения?
2025-04-19 00:20:04,617 - INFO - [connect] Путь к ключу загружен из config.txt: /home/niggermain/.ssh/id_ed25519
2025-04-19 00:20:04,617 - INFO - [connect] Введены хосты: 192.168.1.74,192.168.1.70
2025-04-19 00:20:05,485 - INFO - [connect] 192.168.1.74 доступен по SSH
2025-04-19 00:20:05,528 - INFO - [connect] 192.168.1.70 доступен по SSH
2025-04-19 00:20:05,613 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 00:20:05,760 - INFO - Authentication (publickey) successful!
2025-04-19 00:20:06,369 - INFO - [status] 192.168.1.74 CPU: 3.50%, RAM: 33.33%
2025-04-19 00:20:06,433 - INFO - Connected (version 2.0, client OpenSSH_8.7)
2025-04-19 00:20:06,629 - INFO - Authentication (publickey) successful!
2025-04-19 00:20:07,067 - INFO - [status] 192.168.1.70 CPU: 4.60%, RAM: 37.93%
2025-04-19 00:20:07,072 - INFO - [status] Выбран сервер для установки: 192.168.1.74
2025-04-19 00:20:07,143 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 00:20:07,273 - INFO - Authentication (publickey) successful!
2025-04-19 00:20:07,432 - INFO - [install] Установка PostgreSQL на 192.168.1.74 (debian)
2025-04-19 00:20:07,433 - INFO - [install] Выполняется команда: sudo apt-get install -y lsb-release
2025-04-19 00:20:08,967 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет lsb-release самой новой версии (12.0-1).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-19 00:20:08,968 - INFO - [install] Выполняется команда: sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'
2025-04-19 00:20:09,127 - INFO - [install] Выполняется команда: wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
2025-04-19 00:20:12,425 - INFO - [install] OK
2025-04-19 00:20:12,428 - ERROR - [error] Warning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).
2025-04-19 00:20:12,428 - INFO - [install] Выполняется команда: sudo apt-get update
2025-04-19 00:20:17,231 - INFO - [install] Сущ:1 http://security.debian.org/debian-security bookworm-security InRelease
Сущ:2 http://apt.postgresql.org/pub/repos/apt bookworm-pgdg InRelease
Сущ:3 http://deb.debian.org/debian bookworm InRelease
Пол:4 http://deb.debian.org/debian bookworm-updates InRelease [55,4 kB]
Получено 55,4 kB за 2с (27,1 kB/s)
Чтение списков пакетов…
2025-04-19 00:20:17,233 - ERROR - [error] W: http://apt.postgresql.org/pub/repos/apt/dists/bookworm-pgdg/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.
2025-04-19 00:20:17,233 - INFO - [install] Выполняется команда: locale
2025-04-19 00:20:17,348 - INFO - [install] LANG=ru_RU.UTF-8
LANGUAGE=
LC_CTYPE="ru_RU.UTF-8"
LC_NUMERIC="ru_RU.UTF-8"
LC_TIME="ru_RU.UTF-8"
LC_COLLATE="ru_RU.UTF-8"
LC_MONETARY="ru_RU.UTF-8"
LC_MESSAGES="ru_RU.UTF-8"
LC_PAPER="ru_RU.UTF-8"
LC_NAME="ru_RU.UTF-8"
LC_ADDRESS="ru_RU.UTF-8"
LC_TELEPHONE="ru_RU.UTF-8"
LC_MEASUREMENT="ru_RU.UTF-8"
LC_IDENTIFICATION="ru_RU.UTF-8"
LC_ALL=
2025-04-19 00:20:17,349 - INFO - [install] Выполняется команда: export LC_CTYPE=ru_RU.UTF8
2025-04-19 00:20:17,433 - INFO - [install] Выполняется команда: export LC_COLLATE=ru_RU.UTF8
2025-04-19 00:20:17,522 - INFO - [install] Выполняется команда: locale -a | grep ru_RU
2025-04-19 00:20:17,606 - INFO - [install] ru_RU.utf8
2025-04-19 00:20:17,606 - INFO - [install] Выполняется команда: sudo locale-gen ru_RU.UTF8
2025-04-19 00:20:30,188 - INFO - [install] Generating locales (this might take a while)...
  ru_RU.UTF-8... done
Generation complete.
2025-04-19 00:20:30,188 - INFO - [install] Выполняется команда: sudo apt-get install -y postgresql-17
2025-04-19 00:20:31,758 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет postgresql-17 самой новой версии (17.4-1.pgdg120+2).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-19 00:20:31,758 - INFO - [install] Выполняется команда: sudo -u postgres psql -c 'SELECT version();'
2025-04-19 00:20:31,999 - ERROR - [error] psql: ошибка: подключиться к серверу через сокет "/var/run/postgresql/.s.PGSQL.5432" не удалось: Нет такого файла или каталога
	Сервер действительно работает локально и принимает подключения через этот сокет?
2025-04-19 00:20:32,000 - ERROR - [error] Команда завершилась с кодом 2
2025-04-19 00:20:32,001 - ERROR - [error] Проверка SELECT version() не прошла
2025-04-19 00:20:32,003 - ERROR - [error] PostgreSQL установка не удалась
2025-04-19 00:22:13,323 - INFO - [connect] Путь к ключу загружен из config.txt: /home/niggermain/.ssh/id_ed25519
2025-04-19 00:22:13,324 - INFO - [connect] Введены хосты: 192.168.1.74,192.168.1.70
2025-04-19 00:22:14,863 - INFO - [connect] 192.168.1.74 доступен по SSH
2025-04-19 00:22:14,876 - INFO - [connect] 192.168.1.70 доступен по SSH
2025-04-19 00:22:14,998 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 00:22:15,172 - INFO - Authentication (publickey) successful!
2025-04-19 00:22:15,813 - INFO - [status] 192.168.1.74 CPU: 3.52%, RAM: 34.41%
2025-04-19 00:22:15,870 - INFO - Connected (version 2.0, client OpenSSH_8.7)
2025-04-19 00:22:16,059 - INFO - Authentication (publickey) successful!
2025-04-19 00:22:16,579 - INFO - [status] 192.168.1.70 CPU: 4.20%, RAM: 37.90%
2025-04-19 00:22:16,586 - INFO - [status] Выбран сервер для установки: 192.168.1.74
2025-04-19 00:22:16,660 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 00:22:16,783 - INFO - Authentication (publickey) successful!
2025-04-19 00:22:16,984 - INFO - [install] Установка PostgreSQL на 192.168.1.74 (debian)
2025-04-19 00:22:16,984 - INFO - [install] Выполняется команда: sudo apt-get install -y lsb-release
2025-04-19 00:22:18,485 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет lsb-release самой новой версии (12.0-1).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-19 00:22:18,485 - INFO - [install] Выполняется команда: sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'
2025-04-19 00:22:18,641 - INFO - [install] Выполняется команда: wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
2025-04-19 00:22:21,977 - INFO - [install] OK
2025-04-19 00:22:21,978 - ERROR - [error] Warning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).
2025-04-19 00:22:21,978 - INFO - [install] Выполняется команда: sudo apt-get update
2025-04-19 00:22:26,569 - INFO - [install] Сущ:1 http://apt.postgresql.org/pub/repos/apt bookworm-pgdg InRelease
Сущ:2 http://deb.debian.org/debian bookworm InRelease
Сущ:3 http://deb.debian.org/debian bookworm-updates InRelease
Сущ:4 http://security.debian.org/debian-security bookworm-security InRelease
Чтение списков пакетов…
2025-04-19 00:22:26,572 - ERROR - [error] W: http://apt.postgresql.org/pub/repos/apt/dists/bookworm-pgdg/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.
2025-04-19 00:22:26,573 - INFO - [install] Выполняется команда: locale
2025-04-19 00:22:26,662 - INFO - [install] LANG=ru_RU.UTF-8
LANGUAGE=
LC_CTYPE="ru_RU.UTF-8"
LC_NUMERIC="ru_RU.UTF-8"
LC_TIME="ru_RU.UTF-8"
LC_COLLATE="ru_RU.UTF-8"
LC_MONETARY="ru_RU.UTF-8"
LC_MESSAGES="ru_RU.UTF-8"
LC_PAPER="ru_RU.UTF-8"
LC_NAME="ru_RU.UTF-8"
LC_ADDRESS="ru_RU.UTF-8"
LC_TELEPHONE="ru_RU.UTF-8"
LC_MEASUREMENT="ru_RU.UTF-8"
LC_IDENTIFICATION="ru_RU.UTF-8"
LC_ALL=
2025-04-19 00:22:26,662 - INFO - [install] Выполняется команда: export LC_CTYPE=ru_RU.UTF8
2025-04-19 00:22:26,769 - INFO - [install] Выполняется команда: export LC_COLLATE=ru_RU.UTF8
2025-04-19 00:22:26,843 - INFO - [install] Выполняется команда: locale -a | grep ru_RU
2025-04-19 00:22:26,942 - INFO - [install] ru_RU.utf8
2025-04-19 00:22:26,943 - INFO - [install] Выполняется команда: sudo locale-gen ru_RU.UTF8
2025-04-19 00:22:39,476 - INFO - [install] Generating locales (this might take a while)...
  ru_RU.UTF-8... done
Generation complete.
2025-04-19 00:22:39,476 - INFO - [install] Выполняется команда: sudo apt-get install -y postgresql-17
2025-04-19 00:22:41,057 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет postgresql-17 самой новой версии (17.4-1.pgdg120+2).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-19 00:22:41,058 - INFO - [install] Выполняется команда: sudo -u postgres psql -c 'SELECT version();'
2025-04-19 00:22:41,332 - ERROR - [error] psql: ошибка: подключиться к серверу через сокет "/var/run/postgresql/.s.PGSQL.5432" не удалось: Нет такого файла или каталога
	Сервер действительно работает локально и принимает подключения через этот сокет?
2025-04-19 00:22:41,333 - ERROR - [error] Команда завершилась с кодом 2
2025-04-19 00:22:41,334 - ERROR - [error] Проверка SELECT version() не прошла
2025-04-19 00:22:41,336 - ERROR - [error] PostgreSQL установка не удалась
2025-04-19 00:23:59,219 - INFO - [connect] Путь к ключу загружен из config.txt: /home/niggermain/.ssh/id_ed25519
2025-04-19 00:23:59,219 - INFO - [connect] Введены хосты: 192.168.1.74,192.168.1.70
2025-04-19 00:24:00,971 - INFO - [connect] 192.168.1.74 доступен по SSH
2025-04-19 00:24:00,975 - INFO - [connect] 192.168.1.70 доступен по SSH
2025-04-19 00:24:01,054 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 00:24:01,200 - INFO - Authentication (publickey) successful!
2025-04-19 00:24:01,807 - INFO - [status] 192.168.1.74 CPU: 3.54%, RAM: 34.15%
2025-04-19 00:24:01,833 - INFO - Connected (version 2.0, client OpenSSH_8.7)
2025-04-19 00:24:02,045 - INFO - Authentication (publickey) successful!
2025-04-19 00:24:02,510 - INFO - [status] 192.168.1.70 CPU: 3.94%, RAM: 38.04%
2025-04-19 00:24:02,516 - INFO - [status] Выбран сервер для установки: 192.168.1.74
2025-04-19 00:24:02,585 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 00:24:02,718 - INFO - Authentication (publickey) successful!
2025-04-19 00:24:02,955 - INFO - [install] Установка PostgreSQL на 192.168.1.74 (debian)
2025-04-19 00:24:02,955 - INFO - [install] Выполняется команда: sudo apt-get install -y lsb-release
2025-04-19 00:24:04,482 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет lsb-release самой новой версии (12.0-1).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-19 00:24:04,483 - INFO - [install] Выполняется команда: sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'
2025-04-19 00:24:04,605 - INFO - [install] Выполняется команда: wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
2025-04-19 00:24:07,540 - INFO - [install] OK
2025-04-19 00:24:07,542 - ERROR - [error] Warning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).
2025-04-19 00:24:07,542 - INFO - [install] Выполняется команда: sudo apt-get update
2025-04-19 00:24:12,053 - INFO - [install] Сущ:1 http://apt.postgresql.org/pub/repos/apt bookworm-pgdg InRelease
Сущ:2 http://security.debian.org/debian-security bookworm-security InRelease
Сущ:3 http://deb.debian.org/debian bookworm InRelease
Сущ:4 http://deb.debian.org/debian bookworm-updates InRelease
Чтение списков пакетов…
2025-04-19 00:24:12,056 - ERROR - [error] W: http://apt.postgresql.org/pub/repos/apt/dists/bookworm-pgdg/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.
2025-04-19 00:24:12,056 - INFO - [install] Выполняется команда: locale
2025-04-19 00:24:12,230 - INFO - [install] LANG=ru_RU.UTF-8
LANGUAGE=
LC_CTYPE="ru_RU.UTF-8"
LC_NUMERIC="ru_RU.UTF-8"
LC_TIME="ru_RU.UTF-8"
LC_COLLATE="ru_RU.UTF-8"
LC_MONETARY="ru_RU.UTF-8"
LC_MESSAGES="ru_RU.UTF-8"
LC_PAPER="ru_RU.UTF-8"
LC_NAME="ru_RU.UTF-8"
LC_ADDRESS="ru_RU.UTF-8"
LC_TELEPHONE="ru_RU.UTF-8"
LC_MEASUREMENT="ru_RU.UTF-8"
LC_IDENTIFICATION="ru_RU.UTF-8"
LC_ALL=
2025-04-19 00:24:12,230 - INFO - [install] Выполняется команда: export LC_CTYPE=ru_RU.UTF8
2025-04-19 00:24:12,331 - INFO - [install] Выполняется команда: export LC_COLLATE=ru_RU.UTF8
2025-04-19 00:24:12,420 - INFO - [install] Выполняется команда: locale -a | grep ru_RU
2025-04-19 00:24:12,525 - INFO - [install] ru_RU.utf8
2025-04-19 00:24:12,526 - INFO - [install] Выполняется команда: sudo locale-gen ru_RU.UTF8
2025-04-19 00:24:25,095 - INFO - [install] Generating locales (this might take a while)...
  ru_RU.UTF-8... done
Generation complete.
2025-04-19 00:24:25,095 - INFO - [install] Выполняется команда: sudo apt-get install -y postgresql-17
2025-04-19 00:24:26,686 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет postgresql-17 самой новой версии (17.4-1.pgdg120+2).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-19 00:24:26,686 - INFO - [install] Выполняется команда: sudo -u postgres psql -c 'SELECT version();'
2025-04-19 00:24:26,910 - ERROR - [error] psql: ошибка: подключиться к серверу через сокет "/var/run/postgresql/.s.PGSQL.5432" не удалось: Нет такого файла или каталога
	Сервер действительно работает локально и принимает подключения через этот сокет?
2025-04-19 00:24:26,910 - ERROR - [error] Команда завершилась с кодом 2
2025-04-19 00:24:26,912 - ERROR - [error] Проверка SELECT version() не прошла
2025-04-19 00:24:26,914 - ERROR - [error] PostgreSQL установка не удалась
2025-04-19 00:26:37,069 - INFO - [connect] Путь к ключу загружен из config.txt: /home/niggermain/.ssh/id_ed25519
2025-04-19 00:26:37,070 - INFO - [connect] Введены хосты: 192.168.1.74,192.168.1.70
2025-04-19 00:26:39,410 - INFO - [connect] 192.168.1.74 доступен по SSH
2025-04-19 00:26:39,414 - INFO - [connect] 192.168.1.70 доступен по SSH
2025-04-19 00:26:39,504 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 00:26:39,683 - INFO - Authentication (publickey) successful!
2025-04-19 00:26:40,271 - INFO - [status] 192.168.1.74 CPU: 3.63%, RAM: 33.83%
2025-04-19 00:26:40,310 - INFO - Connected (version 2.0, client OpenSSH_8.7)
2025-04-19 00:26:40,491 - INFO - Authentication (publickey) successful!
2025-04-19 00:26:40,912 - INFO - [status] 192.168.1.70 CPU: 3.58%, RAM: 38.09%
2025-04-19 00:26:40,923 - INFO - [status] Выбран сервер для установки: 192.168.1.74
2025-04-19 00:26:40,997 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 00:26:41,175 - INFO - Authentication (publickey) successful!
2025-04-19 00:26:41,384 - INFO - [install] Установка PostgreSQL на 192.168.1.74 (debian)
2025-04-19 00:26:41,384 - INFO - [install] Выполняется команда: sudo apt-get install -y lsb-release
2025-04-19 00:26:43,001 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет lsb-release самой новой версии (12.0-1).
Следующие пакеты устанавливались автоматически и больше не требуются:
  libcommon-sense-perl libio-pty-perl libipc-run-perl libjson-perl
  libjson-xs-perl libllvm19 libpq5 libtypes-serialiser-perl
  postgresql-common-dev sysstat
Для их удаления используйте «sudo apt autoremove».
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-19 00:26:43,002 - INFO - [install] Выполняется команда: sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'
2025-04-19 00:26:43,152 - INFO - [install] Выполняется команда: wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
2025-04-19 00:26:46,298 - INFO - [install] OK
2025-04-19 00:26:46,301 - ERROR - [error] Warning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).
2025-04-19 00:26:46,302 - INFO - [install] Выполняется команда: sudo apt-get update
2025-04-19 00:26:51,077 - INFO - [install] Сущ:1 http://security.debian.org/debian-security bookworm-security InRelease
Сущ:2 http://deb.debian.org/debian bookworm InRelease
Сущ:3 http://apt.postgresql.org/pub/repos/apt bookworm-pgdg InRelease
Сущ:4 http://deb.debian.org/debian bookworm-updates InRelease
Чтение списков пакетов…
2025-04-19 00:26:51,080 - ERROR - [error] W: http://apt.postgresql.org/pub/repos/apt/dists/bookworm-pgdg/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.
2025-04-19 00:26:51,080 - INFO - [install] Выполняется команда: locale
2025-04-19 00:26:51,218 - INFO - [install] LANG=ru_RU.UTF-8
LANGUAGE=
LC_CTYPE="ru_RU.UTF-8"
LC_NUMERIC="ru_RU.UTF-8"
LC_TIME="ru_RU.UTF-8"
LC_COLLATE="ru_RU.UTF-8"
LC_MONETARY="ru_RU.UTF-8"
LC_MESSAGES="ru_RU.UTF-8"
LC_PAPER="ru_RU.UTF-8"
LC_NAME="ru_RU.UTF-8"
LC_ADDRESS="ru_RU.UTF-8"
LC_TELEPHONE="ru_RU.UTF-8"
LC_MEASUREMENT="ru_RU.UTF-8"
LC_IDENTIFICATION="ru_RU.UTF-8"
LC_ALL=
2025-04-19 00:26:51,219 - INFO - [install] Выполняется команда: export LC_CTYPE=ru_RU.UTF8
2025-04-19 00:26:51,287 - INFO - [install] Выполняется команда: export LC_COLLATE=ru_RU.UTF8
2025-04-19 00:26:51,361 - INFO - [install] Выполняется команда: locale -a | grep ru_RU
2025-04-19 00:26:51,465 - INFO - [install] ru_RU.utf8
2025-04-19 00:26:51,465 - INFO - [install] Выполняется команда: sudo locale-gen ru_RU.UTF8
2025-04-19 00:27:03,785 - INFO - [install] Generating locales (this might take a while)...
  ru_RU.UTF-8... done
Generation complete.
2025-04-19 00:27:03,785 - INFO - [install] Выполняется команда: sudo apt-get install -y postgresql-17
2025-04-19 00:27:41,468 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Будут установлены следующие дополнительные пакеты:
  postgresql-client-17 postgresql-client-common postgresql-common
Предлагаемые пакеты:
  postgresql-doc-17
Следующие НОВЫЕ пакеты будут установлены:
  postgresql-17 postgresql-client-17 postgresql-client-common
  postgresql-common
Обновлено 0 пакетов, установлено 4 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
Необходимо скачать 0 B/18,7 MB архивов.
После данной операции объём занятого дискового пространства возрастёт на 69,6 MB.
Выбор ранее не выбранного пакета postgresql-client-common.
(Чтение базы данных … (Чтение базы данных … 5%(Чтение базы данных … 10%(Чтение базы данных … 15%(Чтение базы данных … 20%(Чтение базы данных … 25%(Чтение базы данных … 30%(Чтение базы данных … 35%(Чтение базы данных … 40%(Чтение базы данных … 45%(Чтение базы данных … 50%(Чтение базы данных … 55%(Чтение базы данных … 60%(Чтение базы данных … 65%(Чтение базы данных … 70%(Чтение базы данных … 75%(Чтение базы данных … 80%(Чтение базы данных … 85%(Чтение базы данных … 90%(Чтение базы данных … 95%(Чтение базы данных … 100%(Чтение базы данных … на данный момент установлено 172055 файлов и каталогов.)
Подготовка к распаковке …/postgresql-client-common_277.pgdg120+1_all.deb …
Распаковывается postgresql-client-common (277.pgdg120+1) …
Выбор ранее не выбранного пакета postgresql-common.
Подготовка к распаковке …/postgresql-common_277.pgdg120+1_all.deb …
Добавляется «отклонение /usr/bin/pg_config в /usr/bin/pg_config.libpq-dev из-за postgresql-common»
Распаковывается postgresql-common (277.pgdg120+1) …
Выбор ранее не выбранного пакета postgresql-client-17.
Подготовка к распаковке …/postgresql-client-17_17.4-1.pgdg120+2_amd64.deb …
Распаковывается postgresql-client-17 (17.4-1.pgdg120+2) …
Выбор ранее не выбранного пакета postgresql-17.
Подготовка к распаковке …/postgresql-17_17.4-1.pgdg120+2_amd64.deb …
Распаковывается postgresql-17 (17.4-1.pgdg120+2) …
Настраивается пакет postgresql-client-common (277.pgdg120+1) …
Настраивается пакет postgresql-client-17 (17.4-1.pgdg120+2) …
update-alternatives: используется /usr/share/postgresql/17/man/man1/psql.1.gz для предоставления /usr/share/man/man1/psql.1.gz (psql.1.gz) в автоматическом режиме
Настраивается пакет postgresql-common (277.pgdg120+1) …
debconf: не удалось инициализировать интерфейс: Dialog
debconf: (Интерфейс dialog не будет работать на неуправляемом (dumb) терминале, из буфера emacs shell или в отсутствие контролирующего терминала.)
debconf: будет использован интерфейс: Readline
debconf: не удалось инициализировать интерфейс: Readline
debconf: (Этот интерфейс работает только с управляющего терминала.)
debconf: будет использован интерфейс: Teletype

Creating config file /etc/postgresql-common/createcluster.conf with new version
Building PostgreSQL dictionaries from installed myspell/hunspell packages...
  en_us
  ru_ru
Removing obsolete dictionary files:
Created symlink /etc/systemd/system/multi-user.target.wants/postgresql.service → /lib/systemd/system/postgresql.service.
Настраивается пакет postgresql-17 (17.4-1.pgdg120+2) …
debconf: не удалось инициализировать интерфейс: Dialog
debconf: (Интерфейс dialog не будет работать на неуправляемом (dumb) терминале, из буфера emacs shell или в отсутствие контролирующего терминала.)
debconf: будет использован интерфейс: Readline
debconf: не удалось инициализировать интерфейс: Readline
debconf: (Этот интерфейс работает только с управляющего терминала.)
debconf: будет использован интерфейс: Teletype
Creating new PostgreSQL cluster 17/main ...
/usr/lib/postgresql/17/bin/initdb -D /var/lib/postgresql/17/main --auth-local peer --auth-host scram-sha-256 --no-instructions
Файлы, относящиеся к этой СУБД, будут принадлежать пользователю "postgres".
От его имени также будет запускаться процесс сервера.

Кластер баз данных будет инициализирован с локалью "ru_RU.UTF-8".
Кодировка БД по умолчанию, выбранная в соответствии с настройками: "UTF8".
Выбрана конфигурация текстового поиска по умолчанию "russian".

Контроль целостности страниц данных отключён.

исправление прав для существующего каталога /var/lib/postgresql/17/main... ок
создание подкаталогов... ок
выбирается реализация динамической разделяемой памяти... posix
выбирается значение "max_connections" по умолчанию... 100
выбирается значение "shared_buffers" по умолчанию... 128MB
выбирается часовой пояс по умолчанию... Europe/Moscow
создание конфигурационных файлов... ок
выполняется подготовительный скрипт... ок
выполняется заключительная инициализация... ок
сохранение данных на диске... ок
Обрабатываются триггеры для man-db (2.11.2-2) …
2025-04-19 00:27:41,475 - ERROR - [error] debconf: не удалось инициализировать интерфейс: Dialog
debconf: (Интерфейс dialog не будет работать на неуправляемом (dumb) терминале, из буфера emacs shell или в отсутствие контролирующего терминала.)
debconf: будет использован интерфейс: Readline
debconf: не удалось инициализировать интерфейс: Readline
debconf: (Этот интерфейс работает только с управляющего терминала.)
debconf: будет использован интерфейс: Teletype
dpkg-preconfigure: не удалось заново открыть stdin:
2025-04-19 00:27:41,476 - INFO - [install] Выполняется команда: sudo -u postgres psql -c 'SELECT version();'
2025-04-19 00:27:41,812 - INFO - [install] version                                                       
---------------------------------------------------------------------------------------------------------------------
 PostgreSQL 17.4 (Debian 17.4-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
(1 строка)
2025-04-19 00:27:41,814 - INFO - [install] Настройка доступа к PostgreSQL с 192.168.1.70
2025-04-19 00:27:41,814 - INFO - [install] Выполняется команда: sudo sed -i 's/^#listen_addresses =.*/listen_addresses = \"*\"/' /eusr/psql-17/share/postgresql.conf|| sudo sed -i 's/^#listen_addresses =.*/listen_addresses = \"*\"/' /var/lib/pgsql/17/data/postgresql.confecho "host    all             student         192.168.1.70/32         md5" | sudo tee -a /etc/postgresql/17/main/pg_hba.conf || echo "host    all             student         192.168.1.70/32         md5" | sudo tee -a /var/lib/pgsql/17/data/pg_hba.confsudo -u postgres psql -tc "SELECT 1 FROM pg_roles WHERE rolname='student'" | grep -q 1 || sudo -u postgres psql -c "CREATE ROLE student LOGIN PASSWORD 'student';"sudo systemctl restart postgresql || sudo systemctl restart postgresql
2025-04-19 00:27:42,018 - ERROR - [error] sed: невозможно прочитать /eusr/psql-17/share/postgresql.conf: Нет такого файла или каталога
sed: невозможно прочитать /var/lib/pgsql/17/data/postgresql.confecho: Нет такого файла или каталога
sed: невозможно прочитать host    all             student         192.168.1.70/32         md5: Нет такого файла или каталога
2025-04-19 00:27:42,020 - INFO - [install] Установка завершена успешно
2025-04-19 00:30:00,991 - INFO - [connect] Путь к ключу загружен из config.txt: /home/niggermain/.ssh/id_ed25519
2025-04-19 00:30:00,992 - INFO - [connect] Введены хосты: 192.168.1.74,192.168.1.70
2025-04-19 00:30:02,422 - INFO - [connect] 192.168.1.74 доступен по SSH
2025-04-19 00:30:02,450 - INFO - [connect] 192.168.1.70 доступен по SSH
2025-04-19 00:30:02,548 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 00:30:02,735 - INFO - Authentication (publickey) successful!
2025-04-19 00:30:03,338 - INFO - [status] 192.168.1.74 CPU: 3.68%, RAM: 33.86%
2025-04-19 00:30:03,360 - INFO - Connected (version 2.0, client OpenSSH_8.7)
2025-04-19 00:30:03,525 - INFO - Authentication (publickey) successful!
2025-04-19 00:30:03,949 - INFO - [status] 192.168.1.70 CPU: 3.21%, RAM: 38.04%
2025-04-19 00:30:03,956 - INFO - [status] Выбран сервер для установки: 192.168.1.74
2025-04-19 00:30:04,042 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 00:30:04,249 - INFO - Authentication (publickey) successful!
2025-04-19 00:30:04,412 - INFO - [install] Установка PostgreSQL на 192.168.1.74 (debian)
2025-04-19 00:30:04,413 - INFO - [install] Выполняется команда: sudo apt-get install -y lsb-release
2025-04-19 00:30:05,981 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет lsb-release самой новой версии (12.0-1).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-19 00:30:05,981 - INFO - [install] Выполняется команда: sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'
2025-04-19 00:30:06,117 - INFO - [install] Выполняется команда: wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
2025-04-19 00:30:09,070 - INFO - [install] OK
2025-04-19 00:30:09,072 - ERROR - [error] Warning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).
2025-04-19 00:30:09,072 - INFO - [install] Выполняется команда: sudo apt-get update
2025-04-19 00:30:13,596 - INFO - [install] Сущ:1 http://security.debian.org/debian-security bookworm-security InRelease
Сущ:2 http://deb.debian.org/debian bookworm InRelease
Сущ:3 http://deb.debian.org/debian bookworm-updates InRelease
Сущ:4 http://apt.postgresql.org/pub/repos/apt bookworm-pgdg InRelease
Чтение списков пакетов…
2025-04-19 00:30:13,600 - ERROR - [error] W: http://apt.postgresql.org/pub/repos/apt/dists/bookworm-pgdg/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.
2025-04-19 00:30:13,601 - INFO - [install] Выполняется команда: locale
2025-04-19 00:30:13,780 - INFO - [install] LANG=ru_RU.UTF-8
LANGUAGE=
LC_CTYPE="ru_RU.UTF-8"
LC_NUMERIC="ru_RU.UTF-8"
LC_TIME="ru_RU.UTF-8"
LC_COLLATE="ru_RU.UTF-8"
LC_MONETARY="ru_RU.UTF-8"
LC_MESSAGES="ru_RU.UTF-8"
LC_PAPER="ru_RU.UTF-8"
LC_NAME="ru_RU.UTF-8"
LC_ADDRESS="ru_RU.UTF-8"
LC_TELEPHONE="ru_RU.UTF-8"
LC_MEASUREMENT="ru_RU.UTF-8"
LC_IDENTIFICATION="ru_RU.UTF-8"
LC_ALL=
2025-04-19 00:30:13,781 - INFO - [install] Выполняется команда: export LC_CTYPE=ru_RU.UTF8
2025-04-19 00:30:14,043 - INFO - [install] Выполняется команда: export LC_COLLATE=ru_RU.UTF8
2025-04-19 00:30:14,146 - INFO - [install] Выполняется команда: locale -a | grep ru_RU
2025-04-19 00:30:14,385 - INFO - [install] ru_RU.utf8
2025-04-19 00:30:14,385 - INFO - [install] Выполняется команда: sudo locale-gen ru_RU.UTF8
2025-04-19 00:30:26,736 - INFO - [install] Generating locales (this might take a while)...
  ru_RU.UTF-8... done
Generation complete.
2025-04-19 00:30:26,736 - INFO - [install] Выполняется команда: sudo apt-get install -y postgresql-17
2025-04-19 00:30:28,340 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет postgresql-17 самой новой версии (17.4-1.pgdg120+2).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-19 00:30:28,340 - INFO - [install] Выполняется команда: sudo -u postgres psql -c 'SELECT version();'
2025-04-19 00:30:28,618 - INFO - [install] version                                                       
---------------------------------------------------------------------------------------------------------------------
 PostgreSQL 17.4 (Debian 17.4-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
(1 строка)
2025-04-19 00:30:28,620 - INFO - [install] Настройка доступа к PostgreSQL с 192.168.1.70
2025-04-19 00:30:28,620 - INFO - [install] Выполняется команда: sudo sed -i 's/^#listen_addresses =.*/listen_addresses = \"*\"/' /etc/postgresql/17/main/postgresql.conf|| sudo sed -i 's/^#listen_addresses =.*/listen_addresses = \"*\"/' /var/lib/pgsql/17/data/postgresql.confecho "host    all             student         192.168.1.70/32         md5" | sudo tee -a /etc/postgresql/17/main/pg_hba.conf || echo "host    all             student         192.168.1.70/32         md5" | sudo tee -a /var/lib/pgsql/17/data/pg_hba.confsudo -u postgres psql -tc "SELECT 1 FROM pg_roles WHERE rolname='student'" | grep -q 1 || sudo -u postgres psql -c "CREATE ROLE student LOGIN PASSWORD 'student';"sudo systemctl restart postgresql || sudo systemctl restart postgresql
2025-04-19 00:30:28,972 - INFO - [install] Установка завершена успешно
2025-04-19 00:31:08,126 - INFO - [connect] Путь к ключу загружен из config.txt: /home/niggermain/.ssh/id_ed25519
2025-04-19 00:31:08,126 - INFO - [connect] Введены хосты: 192.168.1.74,192.168.1.70
2025-04-19 00:31:09,651 - INFO - [connect] 192.168.1.74 доступен по SSH
2025-04-19 00:31:09,665 - INFO - [connect] 192.168.1.70 доступен по SSH
2025-04-19 00:31:09,727 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 00:31:10,001 - INFO - Authentication (publickey) successful!
2025-04-19 00:31:10,637 - INFO - [status] 192.168.1.74 CPU: 3.71%, RAM: 34.15%
2025-04-19 00:31:10,707 - INFO - Connected (version 2.0, client OpenSSH_8.7)
2025-04-19 00:31:10,859 - INFO - Authentication (publickey) successful!
2025-04-19 00:31:11,306 - INFO - [status] 192.168.1.70 CPU: 3.11%, RAM: 37.98%
2025-04-19 00:31:11,309 - INFO - [status] Выбран сервер для установки: 192.168.1.74
2025-04-19 00:31:11,360 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 00:31:11,480 - INFO - Authentication (publickey) successful!
2025-04-19 00:31:11,713 - INFO - [install] Установка PostgreSQL на 192.168.1.74 (debian)
2025-04-19 00:31:11,713 - INFO - [install] Выполняется команда: sudo apt-get install -y lsb-release
2025-04-19 00:31:13,345 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет lsb-release самой новой версии (12.0-1).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-19 00:31:13,346 - INFO - [install] Выполняется команда: sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'
2025-04-19 00:31:13,521 - INFO - [install] Выполняется команда: wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
2025-04-19 00:31:16,760 - INFO - [install] OK
2025-04-19 00:31:16,763 - ERROR - [error] Warning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).
2025-04-19 00:31:16,763 - INFO - [install] Выполняется команда: sudo apt-get update
2025-04-19 00:31:21,260 - INFO - [install] Сущ:1 http://apt.postgresql.org/pub/repos/apt bookworm-pgdg InRelease
Сущ:2 http://deb.debian.org/debian bookworm InRelease
Сущ:3 http://security.debian.org/debian-security bookworm-security InRelease
Сущ:4 http://deb.debian.org/debian bookworm-updates InRelease
Чтение списков пакетов…
2025-04-19 00:31:21,264 - ERROR - [error] W: http://apt.postgresql.org/pub/repos/apt/dists/bookworm-pgdg/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.
2025-04-19 00:31:21,264 - INFO - [install] Выполняется команда: locale
2025-04-19 00:31:21,371 - INFO - [install] LANG=ru_RU.UTF-8
LANGUAGE=
LC_CTYPE="ru_RU.UTF-8"
LC_NUMERIC="ru_RU.UTF-8"
LC_TIME="ru_RU.UTF-8"
LC_COLLATE="ru_RU.UTF-8"
LC_MONETARY="ru_RU.UTF-8"
LC_MESSAGES="ru_RU.UTF-8"
LC_PAPER="ru_RU.UTF-8"
LC_NAME="ru_RU.UTF-8"
LC_ADDRESS="ru_RU.UTF-8"
LC_TELEPHONE="ru_RU.UTF-8"
LC_MEASUREMENT="ru_RU.UTF-8"
LC_IDENTIFICATION="ru_RU.UTF-8"
LC_ALL=
2025-04-19 00:31:21,372 - INFO - [install] Выполняется команда: export LC_CTYPE=ru_RU.UTF8
2025-04-19 00:31:21,466 - INFO - [install] Выполняется команда: export LC_COLLATE=ru_RU.UTF8
2025-04-19 00:31:21,545 - INFO - [install] Выполняется команда: locale -a | grep ru_RU
2025-04-19 00:31:21,654 - INFO - [install] ru_RU.utf8
2025-04-19 00:31:21,655 - INFO - [install] Выполняется команда: sudo locale-gen ru_RU.UTF8
2025-04-19 00:31:34,251 - INFO - [install] Generating locales (this might take a while)...
  ru_RU.UTF-8... done
Generation complete.
2025-04-19 00:31:34,251 - INFO - [install] Выполняется команда: sudo apt-get install -y postgresql-17
2025-04-19 00:31:36,470 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет postgresql-17 самой новой версии (17.4-1.pgdg120+2).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-19 00:31:36,471 - INFO - [install] Выполняется команда: sudo -u postgres psql -c 'SELECT version();'
2025-04-19 00:31:36,707 - ERROR - [error] Error: invalid line 60 in /etc/postgresql/17/main/postgresql.conf: listen_addresses = "*"
2025-04-19 00:31:36,708 - ERROR - [error] Команда завершилась с кодом 1
2025-04-19 00:31:36,709 - ERROR - [error] Проверка SELECT version() не прошла
2025-04-19 00:31:36,711 - ERROR - [error] PostgreSQL установка не удалась
2025-04-19 00:32:42,424 - INFO - [connect] Путь к ключу загружен из config.txt: /home/niggermain/.ssh/id_ed25519
2025-04-19 00:32:42,424 - INFO - [connect] Введены хосты: 192.168.1.74,192.168.1.70
2025-04-19 00:32:47,954 - INFO - [connect] 192.168.1.74 доступен по SSH
2025-04-19 00:32:48,023 - INFO - [connect] 192.168.1.70 доступен по SSH
2025-04-19 00:32:48,115 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 00:32:48,249 - INFO - Authentication (publickey) successful!
2025-04-19 00:32:48,858 - INFO - [status] 192.168.1.74 CPU: 3.73%, RAM: 37.76%
2025-04-19 00:32:48,922 - INFO - Connected (version 2.0, client OpenSSH_8.7)
2025-04-19 00:32:49,105 - INFO - Authentication (publickey) successful!
2025-04-19 00:32:49,493 - INFO - [status] 192.168.1.70 CPU: 2.98%, RAM: 38.12%
2025-04-19 00:32:49,503 - INFO - [status] Выбран сервер для установки: 192.168.1.70
2025-04-19 00:32:49,523 - INFO - Connected (version 2.0, client OpenSSH_8.7)
2025-04-19 00:32:49,700 - INFO - Authentication (publickey) successful!
2025-04-19 00:32:49,873 - INFO - [install] Установка PostgreSQL на 192.168.1.70 (alma)
2025-04-19 00:32:49,873 - INFO - [install] Выполняется команда: sudo dnf install -y https://download.postgresql.org/pub/repos/yum/reporpms/EL-9-x86_64/pgdg-redhat-repo-latest.noarch.rpm
2025-04-19 00:32:51,669 - INFO - [install] Последняя проверка окончания срока действия метаданных: 0:35:48 назад, Пт 18 апр 2025 23:57:02.
pgdg-redhat-repo-latest.noarch.rpm               32 kB/s |  12 kB     00:00    
Пакет pgdg-redhat-repo-42.0-50PGDG.noarch уже установлен.
Зависимости разрешены.
Отсутствуют действия для выполнения.
Выполнено!
2025-04-19 00:32:51,670 - INFO - [install] Выполняется команда: sudo dnf install -y postgresql17-server
2025-04-19 00:32:53,001 - INFO - [install] Последняя проверка окончания срока действия метаданных: 0:35:50 назад, Пт 18 апр 2025 23:57:02.
Пакет postgresql17-server-17.4-1PGDG.rhel9.x86_64 уже установлен.
Зависимости разрешены.
Отсутствуют действия для выполнения.
Выполнено!
2025-04-19 00:32:53,003 - INFO - [install] Выполняется команда: sudo /usr/pgsql-17/bin/postgresql-17-setup initdb
2025-04-19 00:32:53,175 - INFO - [install] Data directory is not empty!
2025-04-19 00:32:53,175 - ERROR - [error] Команда завершилась с кодом 1
2025-04-19 00:32:53,175 - INFO - [install] Выполняется команда: sudo systemctl enable postgresql-17
2025-04-19 00:32:53,981 - INFO - [install] Выполняется команда: sudo systemctl start postgresql-17
2025-04-19 00:32:54,115 - INFO - [install] Выполняется команда: sudo -u postgres psql -c 'SELECT version();'
2025-04-19 00:32:54,343 - INFO - [install] version                                                  
----------------------------------------------------------------------------------------------------------
 PostgreSQL 17.4 on x86_64-pc-linux-gnu, compiled by gcc (GCC) 11.5.0 20240719 (Red Hat 11.5.0-5), 64-bit
(1 строка)
2025-04-19 00:32:54,344 - INFO - [install] Настройка доступа к PostgreSQL с 192.168.1.74
2025-04-19 00:32:54,344 - INFO - [install] Выполняется команда: sudo sed -i 's/^#listen_addresses =.*/listen_addresses = \"localhost\"/' /etc/postgresql/17/main/postgresql.conf|| sudo sed -i 's/^#listen_addresses =.*/listen_addresses = \"*\"/' /var/lib/pgsql/17/data/postgresql.confecho "host    all             student         192.168.1.74/32         md5" | sudo tee -a /etc/postgresql/17/main/pg_hba.conf || echo "host    all             student         192.168.1.74/32         md5" | sudo tee -a /var/lib/pgsql/17/data/pg_hba.confsudo -u postgres psql -tc "SELECT 1 FROM pg_roles WHERE rolname='student'" | grep -q 1 || sudo -u postgres psql -c "CREATE ROLE student LOGIN PASSWORD 'student';"sudo systemctl restart postgresql || sudo systemctl restart postgresql
2025-04-19 00:32:54,624 - ERROR - [error] sed: невозможно прочитать /etc/postgresql/17/main/postgresql.conf: Нет такого файла или каталога
tee: /etc/postgresql/17/main/pg_hba.conf: Нет такого файла или каталога
sed: невозможно прочитать /var/lib/pgsql/17/data/postgresql.confecho: Нет такого файла или каталога
sed: невозможно прочитать host    all             student         192.168.1.74/32         md5: Нет такого файла или каталога
tee: неверный ключ — «u»
По команде «tee --help» можно получить дополнительную информацию.
psql: предупреждение: лишний аргумент "postgresql" проигнорирован
psql: ошибка: подключиться к серверу через сокет "/run/postgresql/.s.PGSQL.5432" не удалось: ВАЖНО:  пользователь "restart" не прошёл проверку подлинности (Peer)
Failed to restart postgresql.service: Unit postgresql.service not found.
2025-04-19 00:32:54,625 - ERROR - [error] Команда завершилась с кодом 5
2025-04-19 00:32:54,626 - INFO - [install] Установка завершена успешно
2025-04-19 00:32:54,692 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 00:32:54,894 - INFO - Authentication (publickey) successful!
2025-04-19 00:32:54,896 - INFO - [install] Проверка подключения student@192.168.1.70 с 192.168.1.74
2025-04-19 00:32:55,177 - ERROR - [error] Ошибка подключения student: psql: ошибка: подключиться к серверу "192.168.1.70", порту 5432 не удалось: Нет маршрута до узла
	Сервер действительно работает по данному адресу и принимает TCP-соединения?
2025-04-19 00:39:58,343 - INFO - [connect] Введены хосты: 192.168.1.74,192.168.1.70
2025-04-19 00:39:58,344 - INFO - [connect] Путь к ключу: /home/niggermain/.ssh/id_ed25519
2025-04-19 00:39:58,370 - INFO - [connect] 192.168.1.74 доступен по SSH
2025-04-19 00:40:03,377 - WARNING - [connect] 192.168.1.70 недоступен
2025-04-19 00:40:03,496 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 00:40:03,705 - INFO - Authentication (publickey) successful!
2025-04-19 00:40:04,328 - INFO - [status] 192.168.1.74 CPU: 3.70%, RAM: 37.07%
2025-04-19 00:40:04,336 - INFO - [status] Выбран сервер для установки: 192.168.1.74
2025-04-19 00:40:04,394 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 00:40:04,619 - INFO - Authentication (publickey) successful!
2025-04-19 00:40:04,774 - INFO - [install] Установка PostgreSQL на 192.168.1.74 (debian)
2025-04-19 00:40:04,775 - INFO - [install] Выполняется команда: sudo apt-get install -y lsb-release
2025-04-19 00:40:06,758 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет lsb-release самой новой версии (12.0-1).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-19 00:40:06,758 - INFO - [install] Выполняется команда: sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'
2025-04-19 00:40:06,920 - INFO - [install] Выполняется команда: wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
2025-04-19 00:40:09,168 - INFO - [install] OK
2025-04-19 00:40:09,171 - ERROR - [error] Warning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).
2025-04-19 00:40:09,171 - INFO - [install] Выполняется команда: sudo apt-get update
2025-04-19 00:40:13,953 - INFO - [install] Сущ:1 http://apt.postgresql.org/pub/repos/apt bookworm-pgdg InRelease
Сущ:2 http://deb.debian.org/debian bookworm InRelease
Сущ:3 http://security.debian.org/debian-security bookworm-security InRelease
Сущ:4 http://deb.debian.org/debian bookworm-updates InRelease
Чтение списков пакетов…
2025-04-19 00:40:13,956 - ERROR - [error] W: http://apt.postgresql.org/pub/repos/apt/dists/bookworm-pgdg/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.
2025-04-19 00:40:13,956 - INFO - [install] Выполняется команда: locale
2025-04-19 00:40:14,227 - INFO - [install] LANG=ru_RU.UTF-8
LANGUAGE=
LC_CTYPE="ru_RU.UTF-8"
LC_NUMERIC="ru_RU.UTF-8"
LC_TIME="ru_RU.UTF-8"
LC_COLLATE="ru_RU.UTF-8"
LC_MONETARY="ru_RU.UTF-8"
LC_MESSAGES="ru_RU.UTF-8"
LC_PAPER="ru_RU.UTF-8"
LC_NAME="ru_RU.UTF-8"
LC_ADDRESS="ru_RU.UTF-8"
LC_TELEPHONE="ru_RU.UTF-8"
LC_MEASUREMENT="ru_RU.UTF-8"
LC_IDENTIFICATION="ru_RU.UTF-8"
LC_ALL=
2025-04-19 00:40:14,227 - INFO - [install] Выполняется команда: export LC_CTYPE=ru_RU.UTF8
2025-04-19 00:40:14,728 - INFO - [install] Выполняется команда: export LC_COLLATE=ru_RU.UTF8
2025-04-19 00:40:14,971 - INFO - [install] Выполняется команда: locale -a | grep ru_RU
2025-04-19 00:40:15,311 - INFO - [install] ru_RU.utf8
2025-04-19 00:40:15,311 - INFO - [install] Выполняется команда: sudo locale-gen ru_RU.UTF8
2025-04-19 00:40:27,939 - INFO - [install] Generating locales (this might take a while)...
  ru_RU.UTF-8... done
Generation complete.
2025-04-19 00:40:27,940 - INFO - [install] Выполняется команда: sudo apt-get install -y postgresql-17
2025-04-19 00:40:29,545 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет postgresql-17 самой новой версии (17.4-1.pgdg120+2).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-19 00:40:29,545 - INFO - [install] Выполняется команда: sudo -u postgres psql -c 'SELECT version();'
2025-04-19 00:40:29,783 - ERROR - [error] Error: invalid line 60 in /etc/postgresql/17/main/postgresql.conf: listen_addresses = "*"
2025-04-19 00:40:29,783 - ERROR - [error] Команда завершилась с кодом 1
2025-04-19 00:40:29,785 - INFO - [install] Настройка доступа к PostgreSQL с 192.168.1.70
2025-04-19 00:40:29,785 - INFO - [install] Выполняется команда: sudo sed -i "s/^#listen_addresses =.*/listen_addresses = '*'" /etc/postgresql/17/main/postgresql.conf || sudo sed -i "s/^#listen_addresses =.*/listen_addresses = '*'" /var/lib/pgsql/17/data/postgresql.conf
2025-04-19 00:40:29,962 - ERROR - [error] sed: -e выражение #1, символ 47: незавершенная команда `s'
sed: -e выражение #1, символ 47: незавершенная команда `s'
2025-04-19 00:40:29,962 - ERROR - [error] Команда завершилась с кодом 1
2025-04-19 00:40:29,963 - INFO - [install] Выполняется команда: echo "host    all             student         192.168.1.70/32         md5" | sudo tee -a /etc/postgresql/17/main/pg_hba.conf || echo "host    all             student         192.168.1.70/32         md5" | sudo tee -a /var/lib/pgsql/17/data/pg_hba.conf
2025-04-19 00:40:30,099 - INFO - [install] host    all             student         192.168.1.70/32         md5
2025-04-19 00:40:30,100 - INFO - [install] Выполняется команда: sudo -u postgres psql -tc "SELECT 1 FROM pg_roles WHERE rolname='student'" | grep -q 1 || sudo -u postgres psql -c "CREATE ROLE student LOGIN PASSWORD 'student';"
2025-04-19 00:40:30,508 - ERROR - [error] Error: invalid line 60 in /etc/postgresql/17/main/postgresql.conf: listen_addresses = "*"
Error: invalid line 60 in /etc/postgresql/17/main/postgresql.conf: listen_addresses = "*"
2025-04-19 00:40:30,509 - ERROR - [error] Команда завершилась с кодом 1
2025-04-19 00:40:30,509 - INFO - [install] Выполняется команда: sudo systemctl restart postgresql-17 || sudo systemctl restart postgresql
2025-04-19 00:40:31,467 - ERROR - [error] Failed to restart postgresql-17.service: Unit postgresql-17.service not found.
2025-04-19 00:40:31,469 - INFO - [install] Установка завершена успешно
2025-04-19 00:40:34,503 - ERROR - [connect] Не удалось подключиться к 192.168.1.70: [Errno None] Unable to connect to port 22 on 192.168.1.70
2025-04-19 00:40:34,505 - ERROR - [error] Проверка подключения student: SSH к 192.168.1.70 не удался
2025-04-19 00:46:05,110 - INFO - [connect] Введены хосты: 192.168.1.74,192.168.1.70
2025-04-19 00:46:05,110 - INFO - [connect] Путь к ключу: /home/niggermain/.ssh/id_ed25519
2025-04-19 00:46:05,155 - INFO - [connect] 192.168.1.74 доступен по SSH
2025-04-19 00:46:08,210 - WARNING - [connect] 192.168.1.70 недоступен
2025-04-19 00:46:08,295 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 00:46:08,474 - INFO - Authentication (publickey) successful!
2025-04-19 00:46:09,065 - INFO - [status] 192.168.1.74 CPU: 3.70%, RAM: 36.12%
2025-04-19 00:46:09,068 - INFO - [status] Выбран сервер для установки: 192.168.1.74
2025-04-19 00:46:09,146 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 00:46:09,411 - INFO - Authentication (publickey) successful!
2025-04-19 00:46:09,585 - INFO - [install] Установка PostgreSQL на 192.168.1.74 (debian)
2025-04-19 00:46:09,585 - INFO - [install] Выполняется команда: sudo apt-get install -y lsb-release
2025-04-19 00:46:11,140 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет lsb-release самой новой версии (12.0-1).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-19 00:46:11,140 - INFO - [install] Выполняется команда: sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'
2025-04-19 00:46:11,276 - INFO - [install] Выполняется команда: wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
2025-04-19 00:46:13,782 - INFO - [install] OK
2025-04-19 00:46:13,786 - ERROR - [error] Warning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).
2025-04-19 00:46:13,786 - INFO - [install] Выполняется команда: sudo apt-get update
2025-04-19 00:46:18,572 - INFO - [install] Сущ:1 http://security.debian.org/debian-security bookworm-security InRelease
Сущ:2 http://deb.debian.org/debian bookworm InRelease
Сущ:3 http://deb.debian.org/debian bookworm-updates InRelease
Сущ:4 http://apt.postgresql.org/pub/repos/apt bookworm-pgdg InRelease
Чтение списков пакетов…
2025-04-19 00:46:18,575 - ERROR - [error] W: http://apt.postgresql.org/pub/repos/apt/dists/bookworm-pgdg/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.
2025-04-19 00:46:18,575 - INFO - [install] Выполняется команда: locale
2025-04-19 00:46:18,694 - INFO - [install] LANG=ru_RU.UTF-8
LANGUAGE=
LC_CTYPE="ru_RU.UTF-8"
LC_NUMERIC="ru_RU.UTF-8"
LC_TIME="ru_RU.UTF-8"
LC_COLLATE="ru_RU.UTF-8"
LC_MONETARY="ru_RU.UTF-8"
LC_MESSAGES="ru_RU.UTF-8"
LC_PAPER="ru_RU.UTF-8"
LC_NAME="ru_RU.UTF-8"
LC_ADDRESS="ru_RU.UTF-8"
LC_TELEPHONE="ru_RU.UTF-8"
LC_MEASUREMENT="ru_RU.UTF-8"
LC_IDENTIFICATION="ru_RU.UTF-8"
LC_ALL=
2025-04-19 00:46:18,694 - INFO - [install] Выполняется команда: export LC_CTYPE=ru_RU.UTF8
2025-04-19 00:46:18,774 - INFO - [install] Выполняется команда: export LC_COLLATE=ru_RU.UTF8
2025-04-19 00:46:18,851 - INFO - [install] Выполняется команда: locale -a | grep ru_RU
2025-04-19 00:46:18,958 - INFO - [install] ru_RU.utf8
2025-04-19 00:46:18,958 - INFO - [install] Выполняется команда: sudo locale-gen ru_RU.UTF8
2025-04-19 00:46:31,395 - INFO - [install] Generating locales (this might take a while)...
  ru_RU.UTF-8... done
Generation complete.
2025-04-19 00:46:31,395 - INFO - [install] Выполняется команда: sudo apt-get install -y postgresql-17
2025-04-19 00:46:33,028 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет postgresql-17 самой новой версии (17.4-1.pgdg120+2).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-19 00:46:33,028 - INFO - [install] Выполняется команда: sudo -u postgres psql -c 'SELECT version();'
2025-04-19 00:46:33,235 - ERROR - [error] Error: invalid line 60 in /etc/postgresql/17/main/postgresql.conf: listen_addresses = "*"
2025-04-19 00:46:33,235 - ERROR - [error] Команда завершилась с кодом 1
2025-04-19 00:46:33,237 - INFO - [install] Настройка доступа к PostgreSQL с 192.168.1.70
2025-04-19 00:46:33,238 - INFO - [install] Выполняется команда: sudo sed -i "s/^#listen_addresses =.*/listen_addresses = \'*\' /etc/postgresql/17/main/postgresql.conf || sudo sed -i "s/^#listen_addresses =.*/listen_addresses = \'*\' /var/lib/pgsql/17/data/postgresql.conf
2025-04-19 00:46:33,372 - ERROR - [error] sed: -e выражение #1, символ 53: неизвестный модификатор к `s'
2025-04-19 00:46:33,373 - ERROR - [error] Команда завершилась с кодом 1
2025-04-19 00:46:33,373 - INFO - [install] Выполняется команда: echo "host    all             student         192.168.1.70/32         md5" | sudo tee -a /etc/postgresql/17/main/pg_hba.conf || echo "host    all             student         192.168.1.70/32         md5" | sudo tee -a /var/lib/pgsql/17/data/pg_hba.conf
2025-04-19 00:46:33,646 - INFO - [install] host    all             student         192.168.1.70/32         md5
2025-04-19 00:46:33,646 - INFO - [install] Выполняется команда: sudo -u postgres psql -tc "SELECT 1 FROM pg_roles WHERE rolname='student'" | grep -q 1 || sudo -u postgres psql -c "CREATE ROLE student LOGIN PASSWORD 'student';"
2025-04-19 00:46:33,988 - ERROR - [error] Error: invalid line 60 in /etc/postgresql/17/main/postgresql.conf: listen_addresses = "*"
Error: invalid line 60 in /etc/postgresql/17/main/postgresql.conf: listen_addresses = "*"
2025-04-19 00:46:33,988 - ERROR - [error] Команда завершилась с кодом 1
2025-04-19 00:46:33,989 - INFO - [install] Выполняется команда: sudo systemctl restart postgresql-17 || sudo systemctl restart postgresql
2025-04-19 00:46:34,397 - ERROR - [error] Failed to restart postgresql-17.service: Unit postgresql-17.service not found.
2025-04-19 00:46:34,401 - INFO - [install] Установка завершена успешно
2025-04-19 00:46:37,436 - ERROR - [connect] Не удалось подключиться к 192.168.1.70: [Errno None] Unable to connect to port 22 on 192.168.1.70
2025-04-19 00:46:37,438 - ERROR - [error] Проверка подключения student: SSH к 192.168.1.70 не удался
2025-04-19 00:47:17,520 - INFO - [connect] Введены хосты: 192.168.1.74,192.168.1.70
2025-04-19 00:47:17,520 - INFO - [connect] Путь к ключу: /home/niggermain/.ssh/id_ed25519
2025-04-19 00:47:18,593 - INFO - [connect] 192.168.1.74 доступен по SSH
2025-04-19 00:47:21,624 - WARNING - [connect] 192.168.1.70 недоступен
2025-04-19 00:47:21,699 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 00:47:21,911 - INFO - Authentication (publickey) successful!
2025-04-19 00:47:22,495 - INFO - [status] 192.168.1.74 CPU: 3.73%, RAM: 36.57%
2025-04-19 00:47:22,504 - INFO - [status] Выбран сервер для установки: 192.168.1.74
2025-04-19 00:47:22,600 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 00:47:22,766 - INFO - Authentication (publickey) successful!
2025-04-19 00:47:22,929 - INFO - [install] Установка PostgreSQL на 192.168.1.74 (debian)
2025-04-19 00:47:22,929 - INFO - [install] Выполняется команда: sudo apt-get install -y lsb-release
2025-04-19 00:47:24,477 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет lsb-release самой новой версии (12.0-1).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-19 00:47:24,478 - INFO - [install] Выполняется команда: sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'
2025-04-19 00:47:24,618 - INFO - [install] Выполняется команда: wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
2025-04-19 00:47:26,691 - INFO - [install] OK
2025-04-19 00:47:26,694 - ERROR - [error] Warning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).
2025-04-19 00:47:26,694 - INFO - [install] Выполняется команда: sudo apt-get update
2025-04-19 00:47:31,206 - INFO - [install] Сущ:1 http://apt.postgresql.org/pub/repos/apt bookworm-pgdg InRelease
Сущ:2 http://deb.debian.org/debian bookworm InRelease
Сущ:3 http://security.debian.org/debian-security bookworm-security InRelease
Сущ:4 http://deb.debian.org/debian bookworm-updates InRelease
Чтение списков пакетов…
2025-04-19 00:47:31,210 - ERROR - [error] W: http://apt.postgresql.org/pub/repos/apt/dists/bookworm-pgdg/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.
2025-04-19 00:47:31,210 - INFO - [install] Выполняется команда: locale
2025-04-19 00:47:31,330 - INFO - [install] LANG=ru_RU.UTF-8
LANGUAGE=
LC_CTYPE="ru_RU.UTF-8"
LC_NUMERIC="ru_RU.UTF-8"
LC_TIME="ru_RU.UTF-8"
LC_COLLATE="ru_RU.UTF-8"
LC_MONETARY="ru_RU.UTF-8"
LC_MESSAGES="ru_RU.UTF-8"
LC_PAPER="ru_RU.UTF-8"
LC_NAME="ru_RU.UTF-8"
LC_ADDRESS="ru_RU.UTF-8"
LC_TELEPHONE="ru_RU.UTF-8"
LC_MEASUREMENT="ru_RU.UTF-8"
LC_IDENTIFICATION="ru_RU.UTF-8"
LC_ALL=
2025-04-19 00:47:31,331 - INFO - [install] Выполняется команда: export LC_CTYPE=ru_RU.UTF8
2025-04-19 00:47:31,567 - INFO - [install] Выполняется команда: export LC_COLLATE=ru_RU.UTF8
2025-04-19 00:47:31,862 - INFO - [install] Выполняется команда: locale -a | grep ru_RU
2025-04-19 00:47:32,033 - INFO - [install] ru_RU.utf8
2025-04-19 00:47:32,034 - INFO - [install] Выполняется команда: sudo locale-gen ru_RU.UTF8
2025-04-19 00:47:44,419 - INFO - [install] Generating locales (this might take a while)...
  ru_RU.UTF-8... done
Generation complete.
2025-04-19 00:47:44,419 - INFO - [install] Выполняется команда: sudo apt-get install -y postgresql-17
2025-04-19 00:47:46,135 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет postgresql-17 самой новой версии (17.4-1.pgdg120+2).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-19 00:47:46,135 - INFO - [install] Выполняется команда: sudo -u postgres psql -c 'SELECT version();'
2025-04-19 00:47:46,409 - ERROR - [error] Error: invalid line 60 in /etc/postgresql/17/main/postgresql.conf: listen_addresses = "*"
2025-04-19 00:47:46,410 - ERROR - [error] Команда завершилась с кодом 1
2025-04-19 00:47:46,412 - INFO - [install] Настройка доступа к PostgreSQL с 192.168.1.70
2025-04-19 00:47:46,413 - INFO - [install] Выполняется команда: sudo sed -i "s/^#listen_addresses =.*/listen_addresses = \'*\' /etc/postgresql/17/main/postgresql.conf || sudo sed -i "s/^#listen_addresses =.*/listen_addresses = \'*\' /var/lib/pgsql/17/data/postgresql.conf
2025-04-19 00:47:46,669 - ERROR - [error] sed: -e выражение #1, символ 53: неизвестный модификатор к `s'
2025-04-19 00:47:46,669 - ERROR - [error] Команда завершилась с кодом 1
2025-04-19 00:47:46,670 - INFO - [install] Выполняется команда: echo "host    all             student         192.168.1.70/32         md5" | sudo tee -a /etc/postgresql/17/main/pg_hba.conf || echo "host    all             student         192.168.1.70/32         md5" | sudo tee -a /var/lib/pgsql/17/data/pg_hba.conf
2025-04-19 00:47:46,907 - INFO - [install] host    all             student         192.168.1.70/32         md5
2025-04-19 00:47:46,907 - INFO - [install] Выполняется команда: sudo -u postgres psql -tc "SELECT 1 FROM pg_roles WHERE rolname='student'" | grep -q 1 || sudo -u postgres psql -c "CREATE ROLE student LOGIN PASSWORD 'student';"
2025-04-19 00:47:47,300 - ERROR - [error] Error: invalid line 60 in /etc/postgresql/17/main/postgresql.conf: listen_addresses = "*"
Error: invalid line 60 in /etc/postgresql/17/main/postgresql.conf: listen_addresses = "*"
2025-04-19 00:47:47,301 - ERROR - [error] Команда завершилась с кодом 1
2025-04-19 00:47:47,301 - INFO - [install] Выполняется команда: sudo systemctl restart postgresql-17 || sudo systemctl restart postgresql
2025-04-19 00:47:47,681 - ERROR - [error] Failed to restart postgresql-17.service: Unit postgresql-17.service not found.
2025-04-19 00:47:47,683 - INFO - [install] Установка завершена успешно
2025-04-19 00:47:50,716 - ERROR - [connect] Не удалось подключиться к 192.168.1.70: [Errno None] Unable to connect to port 22 on 192.168.1.70
2025-04-19 00:47:50,718 - ERROR - [error] Проверка подключения student: SSH к 192.168.1.70 не удался
2025-04-19 00:48:39,920 - INFO - [connect] Введены хосты: 192.168.1.74,192.168.1.70
2025-04-19 00:48:39,920 - INFO - [connect] Путь к ключу: /home/niggermain/.ssh/id_ed25519
2025-04-19 00:48:39,959 - INFO - [connect] 192.168.1.74 доступен по SSH
2025-04-19 00:48:43,015 - WARNING - [connect] 192.168.1.70 недоступен
2025-04-19 00:48:43,095 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 00:48:43,277 - INFO - Authentication (publickey) successful!
2025-04-19 00:48:43,874 - INFO - [status] 192.168.1.74 CPU: 3.75%, RAM: 36.18%
2025-04-19 00:48:43,881 - INFO - [status] Выбран сервер для установки: 192.168.1.74
2025-04-19 00:48:43,953 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 00:48:44,215 - INFO - Authentication (publickey) successful!
2025-04-19 00:48:44,378 - INFO - [install] Установка PostgreSQL на 192.168.1.74 (debian)
2025-04-19 00:48:44,378 - INFO - [install] Выполняется команда: sudo apt-get install -y lsb-release
2025-04-19 00:48:45,934 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет lsb-release самой новой версии (12.0-1).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-19 00:48:45,934 - INFO - [install] Выполняется команда: sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'
2025-04-19 00:48:46,063 - INFO - [install] Выполняется команда: wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
2025-04-19 00:48:48,179 - INFO - [install] OK
2025-04-19 00:48:48,182 - ERROR - [error] Warning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).
2025-04-19 00:48:48,183 - INFO - [install] Выполняется команда: sudo apt-get update
2025-04-19 00:48:52,647 - INFO - [install] Сущ:1 http://apt.postgresql.org/pub/repos/apt bookworm-pgdg InRelease
Сущ:2 http://deb.debian.org/debian bookworm InRelease
Сущ:3 http://security.debian.org/debian-security bookworm-security InRelease
Сущ:4 http://deb.debian.org/debian bookworm-updates InRelease
Чтение списков пакетов…
2025-04-19 00:48:52,650 - ERROR - [error] W: http://apt.postgresql.org/pub/repos/apt/dists/bookworm-pgdg/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.
2025-04-19 00:48:52,651 - INFO - [install] Выполняется команда: locale
2025-04-19 00:48:52,760 - INFO - [install] LANG=ru_RU.UTF-8
LANGUAGE=
LC_CTYPE="ru_RU.UTF-8"
LC_NUMERIC="ru_RU.UTF-8"
LC_TIME="ru_RU.UTF-8"
LC_COLLATE="ru_RU.UTF-8"
LC_MONETARY="ru_RU.UTF-8"
LC_MESSAGES="ru_RU.UTF-8"
LC_PAPER="ru_RU.UTF-8"
LC_NAME="ru_RU.UTF-8"
LC_ADDRESS="ru_RU.UTF-8"
LC_TELEPHONE="ru_RU.UTF-8"
LC_MEASUREMENT="ru_RU.UTF-8"
LC_IDENTIFICATION="ru_RU.UTF-8"
LC_ALL=
2025-04-19 00:48:52,761 - INFO - [install] Выполняется команда: export LC_CTYPE=ru_RU.UTF8
2025-04-19 00:48:52,843 - INFO - [install] Выполняется команда: export LC_COLLATE=ru_RU.UTF8
2025-04-19 00:48:52,940 - INFO - [install] Выполняется команда: locale -a | grep ru_RU
2025-04-19 00:48:53,021 - INFO - [install] ru_RU.utf8
2025-04-19 00:48:53,021 - INFO - [install] Выполняется команда: sudo locale-gen ru_RU.UTF8
2025-04-19 00:49:05,417 - INFO - [install] Generating locales (this might take a while)...
  ru_RU.UTF-8... done
Generation complete.
2025-04-19 00:49:05,418 - INFO - [install] Выполняется команда: sudo apt-get install -y postgresql-17
2025-04-19 00:49:06,956 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет postgresql-17 самой новой версии (17.4-1.pgdg120+2).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-19 00:49:06,957 - INFO - [install] Выполняется команда: sudo -u postgres psql -c 'SELECT version();'
2025-04-19 00:49:07,220 - ERROR - [error] Error: invalid line 60 in /etc/postgresql/17/main/postgresql.conf: listen_addresses = "*"
2025-04-19 00:49:07,221 - ERROR - [error] Команда завершилась с кодом 1
2025-04-19 00:49:07,223 - INFO - [install] Настройка доступа к PostgreSQL с 192.168.1.70
2025-04-19 00:49:07,223 - INFO - [install] Выполняется команда: sudo sed -i "s/^#listen_addresses =.*/listen_addresses = \'*\' /etc/postgresql/17/main/postgresql.conf || sudo sed -i "s/^#listen_addresses =.*/listen_addresses = \'*\' /var/lib/pgsql/17/data/postgresql.conf
2025-04-19 00:49:07,405 - ERROR - [error] sed: -e выражение #1, символ 53: неизвестный модификатор к `s'
2025-04-19 00:49:07,406 - ERROR - [error] Команда завершилась с кодом 1
2025-04-19 00:49:07,406 - INFO - [install] Выполняется команда: echo "host    all             student         192.168.1.70/32         md5" | sudo tee -a /etc/postgresql/17/main/pg_hba.conf || echo "host    all             student         192.168.1.70/32         md5" | sudo tee -a /var/lib/pgsql/17/data/pg_hba.conf
2025-04-19 00:49:07,539 - INFO - [install] host    all             student         192.168.1.70/32         md5
2025-04-19 00:49:07,539 - INFO - [install] Выполняется команда: sudo -u postgres psql -tc "SELECT 1 FROM pg_roles WHERE rolname='student'" | grep -q 1 || sudo -u postgres psql -c "CREATE ROLE student LOGIN PASSWORD 'student';"
2025-04-19 00:49:07,903 - ERROR - [error] Error: invalid line 60 in /etc/postgresql/17/main/postgresql.conf: listen_addresses = "*"
Error: invalid line 60 in /etc/postgresql/17/main/postgresql.conf: listen_addresses = "*"
2025-04-19 00:49:07,903 - ERROR - [error] Команда завершилась с кодом 1
2025-04-19 00:49:07,903 - INFO - [install] Выполняется команда: sudo systemctl restart postgresql-17 || sudo systemctl restart postgresql
2025-04-19 00:49:08,443 - ERROR - [error] Failed to restart postgresql-17.service: Unit postgresql-17.service not found.
2025-04-19 00:49:08,445 - INFO - [install] Установка завершена успешно
2025-04-19 00:49:11,489 - ERROR - [connect] Не удалось подключиться к 192.168.1.70: [Errno None] Unable to connect to port 22 on 192.168.1.70
2025-04-19 00:49:11,490 - ERROR - [error] Проверка подключения student: SSH к 192.168.1.70 не удался
2025-04-19 00:51:45,579 - INFO - [connect] Введены хосты: 192.168.1.74,192.168.1.70
2025-04-19 00:51:45,579 - INFO - [connect] Путь к ключу: /home/niggermain/.ssh/id_ed25519
2025-04-19 00:51:45,632 - INFO - [connect] 192.168.1.74 доступен по SSH
2025-04-19 00:51:48,664 - WARNING - [connect] 192.168.1.70 недоступен
2025-04-19 00:51:48,762 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 00:51:48,888 - INFO - Authentication (publickey) successful!
2025-04-19 00:51:49,509 - INFO - [status] 192.168.1.74 CPU: 3.76%, RAM: 36.39%
2025-04-19 00:51:49,517 - INFO - [status] Выбран сервер для установки: 192.168.1.74
2025-04-19 00:51:49,574 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 00:51:49,787 - INFO - Authentication (publickey) successful!
2025-04-19 00:51:49,961 - INFO - [install] Установка PostgreSQL на 192.168.1.74 (debian)
2025-04-19 00:51:49,961 - INFO - [install] Выполняется команда: sudo apt-get install -y lsb-release
2025-04-19 00:51:51,491 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет lsb-release самой новой версии (12.0-1).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-19 00:51:51,492 - INFO - [install] Выполняется команда: sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'
2025-04-19 00:51:51,647 - INFO - [install] Выполняется команда: wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
2025-04-19 00:51:53,830 - INFO - [install] OK
2025-04-19 00:51:53,832 - ERROR - [error] Warning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).
2025-04-19 00:51:53,833 - INFO - [install] Выполняется команда: sudo apt-get update
2025-04-19 00:51:58,402 - INFO - [install] Сущ:1 http://apt.postgresql.org/pub/repos/apt bookworm-pgdg InRelease
Сущ:2 http://security.debian.org/debian-security bookworm-security InRelease
Сущ:3 http://deb.debian.org/debian bookworm InRelease
Сущ:4 http://deb.debian.org/debian bookworm-updates InRelease
Чтение списков пакетов…
2025-04-19 00:51:58,405 - ERROR - [error] W: http://apt.postgresql.org/pub/repos/apt/dists/bookworm-pgdg/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.
2025-04-19 00:51:58,406 - INFO - [install] Выполняется команда: locale
2025-04-19 00:51:58,512 - INFO - [install] LANG=ru_RU.UTF-8
LANGUAGE=
LC_CTYPE="ru_RU.UTF-8"
LC_NUMERIC="ru_RU.UTF-8"
LC_TIME="ru_RU.UTF-8"
LC_COLLATE="ru_RU.UTF-8"
LC_MONETARY="ru_RU.UTF-8"
LC_MESSAGES="ru_RU.UTF-8"
LC_PAPER="ru_RU.UTF-8"
LC_NAME="ru_RU.UTF-8"
LC_ADDRESS="ru_RU.UTF-8"
LC_TELEPHONE="ru_RU.UTF-8"
LC_MEASUREMENT="ru_RU.UTF-8"
LC_IDENTIFICATION="ru_RU.UTF-8"
LC_ALL=
2025-04-19 00:51:58,513 - INFO - [install] Выполняется команда: export LC_CTYPE=ru_RU.UTF8
2025-04-19 00:51:58,672 - INFO - [install] Выполняется команда: export LC_COLLATE=ru_RU.UTF8
2025-04-19 00:51:58,778 - INFO - [install] Выполняется команда: locale -a | grep ru_RU
2025-04-19 00:51:58,872 - INFO - [install] ru_RU.utf8
2025-04-19 00:51:58,872 - INFO - [install] Выполняется команда: sudo locale-gen ru_RU.UTF8
2025-04-19 00:52:11,299 - INFO - [install] Generating locales (this might take a while)...
  ru_RU.UTF-8... done
Generation complete.
2025-04-19 00:52:11,299 - INFO - [install] Выполняется команда: sudo apt-get install -y postgresql-17
2025-04-19 00:52:13,078 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет postgresql-17 самой новой версии (17.4-1.pgdg120+2).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-19 00:52:13,079 - INFO - [install] Выполняется команда: sudo -u postgres psql -c 'SELECT version();'
2025-04-19 00:52:13,338 - ERROR - [error] Error: invalid line 60 in /etc/postgresql/17/main/postgresql.conf: listen_addresses = "*"
2025-04-19 00:52:13,338 - ERROR - [error] Команда завершилась с кодом 1
2025-04-19 00:52:13,340 - INFO - [install] Настройка доступа к PostgreSQL с 192.168.1.70
2025-04-19 00:52:13,340 - INFO - [install] Выполняется команда: sudo sed -i "s/^#listen_addresses =.*/listen_addresses = '*'" /etc/postgresql/17/main/postgresql.conf || sudo sed -i "s/^#listen_addresses =.*/listen_addresses = '*'" /var/lib/pgsql/17/data/postgresql.conf
2025-04-19 00:52:13,449 - ERROR - [error] sed: -e выражение #1, символ 47: незавершенная команда `s'
sed: -e выражение #1, символ 47: незавершенная команда `s'
2025-04-19 00:52:13,450 - ERROR - [error] Команда завершилась с кодом 1
2025-04-19 00:52:13,450 - INFO - [install] Выполняется команда: echo "host    all             student         192.168.1.70/32         md5" | sudo tee -a /etc/postgresql/17/main/pg_hba.conf || echo "host    all             student         192.168.1.70/32         md5" | sudo tee -a /var/lib/pgsql/17/data/pg_hba.conf
2025-04-19 00:52:13,571 - INFO - [install] host    all             student         192.168.1.70/32         md5
2025-04-19 00:52:13,571 - INFO - [install] Выполняется команда: sudo -u postgres psql -tc "SELECT 1 FROM pg_roles WHERE rolname='student'" | grep -q 1 || sudo -u postgres psql -c "CREATE ROLE student LOGIN PASSWORD 'student';"
2025-04-19 00:52:13,974 - ERROR - [error] Error: invalid line 60 in /etc/postgresql/17/main/postgresql.conf: listen_addresses = "*"
Error: invalid line 60 in /etc/postgresql/17/main/postgresql.conf: listen_addresses = "*"
2025-04-19 00:52:13,974 - ERROR - [error] Команда завершилась с кодом 1
2025-04-19 00:52:13,975 - INFO - [install] Выполняется команда: sudo systemctl restart postgresql-17 || sudo systemctl restart postgresql
2025-04-19 00:52:14,429 - ERROR - [error] Failed to restart postgresql-17.service: Unit postgresql-17.service not found.
2025-04-19 00:52:14,430 - INFO - [install] Установка завершена успешно
2025-04-19 00:52:17,466 - ERROR - [connect] Не удалось подключиться к 192.168.1.70: [Errno None] Unable to connect to port 22 on 192.168.1.70
2025-04-19 00:52:17,467 - ERROR - [error] Проверка подключения student: SSH к 192.168.1.70 не удался
2025-04-19 00:54:29,395 - INFO - [connect] Введены хосты: 192.168.1.74,192.168.1.70
2025-04-19 00:54:29,395 - INFO - [connect] Путь к ключу: /home/niggermain/.ssh/id_ed25519
2025-04-19 00:54:29,423 - INFO - [connect] 192.168.1.74 доступен по SSH
2025-04-19 00:54:32,478 - WARNING - [connect] 192.168.1.70 недоступен
2025-04-19 00:54:32,571 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 00:54:32,698 - INFO - Authentication (publickey) successful!
2025-04-19 00:54:33,319 - INFO - [status] 192.168.1.74 CPU: 3.81%, RAM: 33.68%
2025-04-19 00:54:33,341 - INFO - [status] Выбран сервер для установки: 192.168.1.74
2025-04-19 00:54:33,662 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 00:54:33,867 - INFO - Authentication (publickey) successful!
2025-04-19 00:54:34,041 - INFO - [install] Установка PostgreSQL на 192.168.1.74 (debian)
2025-04-19 00:54:34,041 - INFO - [install] Выполняется команда: sudo apt-get install -y lsb-release
2025-04-19 00:54:35,639 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет lsb-release самой новой версии (12.0-1).
Следующие пакеты устанавливались автоматически и больше не требуются:
  libcommon-sense-perl libio-pty-perl libipc-run-perl libjson-perl
  libjson-xs-perl libllvm19 libpq5 libtypes-serialiser-perl
  postgresql-common-dev sysstat
Для их удаления используйте «sudo apt autoremove».
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-19 00:54:35,640 - INFO - [install] Выполняется команда: sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'
2025-04-19 00:54:35,810 - INFO - [install] Выполняется команда: wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
2025-04-19 00:54:37,926 - INFO - [install] OK
2025-04-19 00:54:37,928 - ERROR - [error] Warning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).
2025-04-19 00:54:37,929 - INFO - [install] Выполняется команда: sudo apt-get update
2025-04-19 00:54:42,423 - INFO - [install] Сущ:1 http://apt.postgresql.org/pub/repos/apt bookworm-pgdg InRelease
Сущ:2 http://security.debian.org/debian-security bookworm-security InRelease
Сущ:3 http://deb.debian.org/debian bookworm InRelease
Сущ:4 http://deb.debian.org/debian bookworm-updates InRelease
Чтение списков пакетов…
2025-04-19 00:54:42,426 - ERROR - [error] W: http://apt.postgresql.org/pub/repos/apt/dists/bookworm-pgdg/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.
2025-04-19 00:54:42,426 - INFO - [install] Выполняется команда: locale
2025-04-19 00:54:42,539 - INFO - [install] LANG=ru_RU.UTF-8
LANGUAGE=
LC_CTYPE="ru_RU.UTF-8"
LC_NUMERIC="ru_RU.UTF-8"
LC_TIME="ru_RU.UTF-8"
LC_COLLATE="ru_RU.UTF-8"
LC_MONETARY="ru_RU.UTF-8"
LC_MESSAGES="ru_RU.UTF-8"
LC_PAPER="ru_RU.UTF-8"
LC_NAME="ru_RU.UTF-8"
LC_ADDRESS="ru_RU.UTF-8"
LC_TELEPHONE="ru_RU.UTF-8"
LC_MEASUREMENT="ru_RU.UTF-8"
LC_IDENTIFICATION="ru_RU.UTF-8"
LC_ALL=
2025-04-19 00:54:42,541 - INFO - [install] Выполняется команда: export LC_CTYPE=ru_RU.UTF8
2025-04-19 00:54:42,621 - INFO - [install] Выполняется команда: export LC_COLLATE=ru_RU.UTF8
2025-04-19 00:54:42,707 - INFO - [install] Выполняется команда: locale -a | grep ru_RU
2025-04-19 00:54:42,800 - INFO - [install] ru_RU.utf8
2025-04-19 00:54:42,800 - INFO - [install] Выполняется команда: sudo locale-gen ru_RU.UTF8
2025-04-19 00:54:55,240 - INFO - [install] Generating locales (this might take a while)...
  ru_RU.UTF-8... done
Generation complete.
2025-04-19 00:54:55,240 - INFO - [install] Выполняется команда: sudo apt-get install -y postgresql-17
2025-04-19 00:55:31,374 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Будут установлены следующие дополнительные пакеты:
  postgresql-client-17 postgresql-client-common postgresql-common
Предлагаемые пакеты:
  postgresql-doc-17
Следующие НОВЫЕ пакеты будут установлены:
  postgresql-17 postgresql-client-17 postgresql-client-common
  postgresql-common
Обновлено 0 пакетов, установлено 4 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
Необходимо скачать 0 B/18,7 MB архивов.
После данной операции объём занятого дискового пространства возрастёт на 69,6 MB.
Выбор ранее не выбранного пакета postgresql-client-common.
(Чтение базы данных … (Чтение базы данных … 5%(Чтение базы данных … 10%(Чтение базы данных … 15%(Чтение базы данных … 20%(Чтение базы данных … 25%(Чтение базы данных … 30%(Чтение базы данных … 35%(Чтение базы данных … 40%(Чтение базы данных … 45%(Чтение базы данных … 50%(Чтение базы данных … 55%(Чтение базы данных … 60%(Чтение базы данных … 65%(Чтение базы данных … 70%(Чтение базы данных … 75%(Чтение базы данных … 80%(Чтение базы данных … 85%(Чтение базы данных … 90%(Чтение базы данных … 95%(Чтение базы данных … 100%(Чтение базы данных … на данный момент установлено 172055 файлов и каталогов.)
Подготовка к распаковке …/postgresql-client-common_277.pgdg120+1_all.deb …
Распаковывается postgresql-client-common (277.pgdg120+1) …
Выбор ранее не выбранного пакета postgresql-common.
Подготовка к распаковке …/postgresql-common_277.pgdg120+1_all.deb …
Добавляется «отклонение /usr/bin/pg_config в /usr/bin/pg_config.libpq-dev из-за postgresql-common»
Распаковывается postgresql-common (277.pgdg120+1) …
Выбор ранее не выбранного пакета postgresql-client-17.
Подготовка к распаковке …/postgresql-client-17_17.4-1.pgdg120+2_amd64.deb …
Распаковывается postgresql-client-17 (17.4-1.pgdg120+2) …
Выбор ранее не выбранного пакета postgresql-17.
Подготовка к распаковке …/postgresql-17_17.4-1.pgdg120+2_amd64.deb …
Распаковывается postgresql-17 (17.4-1.pgdg120+2) …
Настраивается пакет postgresql-client-common (277.pgdg120+1) …
Настраивается пакет postgresql-client-17 (17.4-1.pgdg120+2) …
update-alternatives: используется /usr/share/postgresql/17/man/man1/psql.1.gz для предоставления /usr/share/man/man1/psql.1.gz (psql.1.gz) в автоматическом режиме
Настраивается пакет postgresql-common (277.pgdg120+1) …
debconf: не удалось инициализировать интерфейс: Dialog
debconf: (Интерфейс dialog не будет работать на неуправляемом (dumb) терминале, из буфера emacs shell или в отсутствие контролирующего терминала.)
debconf: будет использован интерфейс: Readline
debconf: не удалось инициализировать интерфейс: Readline
debconf: (Этот интерфейс работает только с управляющего терминала.)
debconf: будет использован интерфейс: Teletype

Creating config file /etc/postgresql-common/createcluster.conf with new version
Building PostgreSQL dictionaries from installed myspell/hunspell packages...
  en_us
  ru_ru
Removing obsolete dictionary files:
Created symlink /etc/systemd/system/multi-user.target.wants/postgresql.service → /lib/systemd/system/postgresql.service.
Настраивается пакет postgresql-17 (17.4-1.pgdg120+2) …
debconf: не удалось инициализировать интерфейс: Dialog
debconf: (Интерфейс dialog не будет работать на неуправляемом (dumb) терминале, из буфера emacs shell или в отсутствие контролирующего терминала.)
debconf: будет использован интерфейс: Readline
debconf: не удалось инициализировать интерфейс: Readline
debconf: (Этот интерфейс работает только с управляющего терминала.)
debconf: будет использован интерфейс: Teletype
Creating new PostgreSQL cluster 17/main ...
/usr/lib/postgresql/17/bin/initdb -D /var/lib/postgresql/17/main --auth-local peer --auth-host scram-sha-256 --no-instructions
Файлы, относящиеся к этой СУБД, будут принадлежать пользователю "postgres".
От его имени также будет запускаться процесс сервера.

Кластер баз данных будет инициализирован с локалью "ru_RU.UTF-8".
Кодировка БД по умолчанию, выбранная в соответствии с настройками: "UTF8".
Выбрана конфигурация текстового поиска по умолчанию "russian".

Контроль целостности страниц данных отключён.

исправление прав для существующего каталога /var/lib/postgresql/17/main... ок
создание подкаталогов... ок
выбирается реализация динамической разделяемой памяти... posix
выбирается значение "max_connections" по умолчанию... 100
выбирается значение "shared_buffers" по умолчанию... 128MB
выбирается часовой пояс по умолчанию... Europe/Moscow
создание конфигурационных файлов... ок
выполняется подготовительный скрипт... ок
выполняется заключительная инициализация... ок
сохранение данных на диске... ок
Обрабатываются триггеры для man-db (2.11.2-2) …
2025-04-19 00:55:31,381 - ERROR - [error] debconf: не удалось инициализировать интерфейс: Dialog
debconf: (Интерфейс dialog не будет работать на неуправляемом (dumb) терминале, из буфера emacs shell или в отсутствие контролирующего терминала.)
debconf: будет использован интерфейс: Readline
debconf: не удалось инициализировать интерфейс: Readline
debconf: (Этот интерфейс работает только с управляющего терминала.)
debconf: будет использован интерфейс: Teletype
dpkg-preconfigure: не удалось заново открыть stdin:
2025-04-19 00:55:31,381 - INFO - [install] Выполняется команда: sudo -u postgres psql -c 'SELECT version();'
2025-04-19 00:55:31,680 - INFO - [install] version                                                       
---------------------------------------------------------------------------------------------------------------------
 PostgreSQL 17.4 (Debian 17.4-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
(1 строка)
2025-04-19 00:55:31,682 - INFO - [install] Настройка доступа к PostgreSQL с 192.168.1.70
2025-04-19 00:55:31,683 - INFO - [install] Выполняется команда: sudo sed -i "s/^#listen_addresses =.*/listen_addresses = \'*\' /etc/postgresql/17/main/postgresql.conf || sudo sed -i "s/^#listen_addresses =.*/listen_addresses = \'*\' /var/lib/pgsql/17/data/postgresql.conf
2025-04-19 00:55:32,163 - ERROR - [error] sed: -e выражение #1, символ 53: неизвестный модификатор к `s'
2025-04-19 00:55:32,164 - ERROR - [error] Команда завершилась с кодом 1
2025-04-19 00:55:32,164 - INFO - [install] Выполняется команда: echo "host    all             student         192.168.1.70/32         md5" | sudo tee -a /etc/postgresql/17/main/pg_hba.conf || echo "host    all             student         192.168.1.70/32         md5" | sudo tee -a /var/lib/pgsql/17/data/pg_hba.conf
2025-04-19 00:55:32,377 - INFO - [install] host    all             student         192.168.1.70/32         md5
2025-04-19 00:55:32,378 - INFO - [install] Выполняется команда: sudo -u postgres psql -tc "SELECT 1 FROM pg_roles WHERE rolname='student'" | grep -q 1 || sudo -u postgres psql -c "CREATE ROLE student LOGIN PASSWORD 'student';"
2025-04-19 00:55:33,092 - INFO - [install] CREATE ROLE
2025-04-19 00:55:33,745 - INFO - [install] Выполняется команда: sudo systemctl restart postgresql-17 || sudo systemctl restart postgresql
2025-04-19 00:55:37,511 - ERROR - [error] Failed to restart postgresql-17.service: Unit postgresql-17.service not found.
2025-04-19 00:55:37,513 - INFO - [install] Установка завершена успешно
2025-04-19 00:55:40,556 - ERROR - [connect] Не удалось подключиться к 192.168.1.70: [Errno None] Unable to connect to port 22 on 192.168.1.70
2025-04-19 00:55:40,558 - ERROR - [error] Проверка подключения student: SSH к 192.168.1.70 не удался
2025-04-19 00:58:52,757 - INFO - [connect] Введены хосты: 192.168.1.74,192.168.1.70
2025-04-19 00:58:52,757 - INFO - [connect] Путь к ключу: /home/niggermain/.ssh/id_ed25519
2025-04-19 00:58:52,802 - INFO - [connect] 192.168.1.74 доступен по SSH
2025-04-19 00:58:55,837 - WARNING - [connect] 192.168.1.70 недоступен
2025-04-19 00:58:55,956 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 00:58:56,180 - INFO - Authentication (publickey) successful!
2025-04-19 00:58:56,877 - INFO - [status] 192.168.1.74 CPU: 3.85%, RAM: 34.20%
2025-04-19 00:58:56,883 - INFO - [status] Выбран сервер для установки: 192.168.1.74
2025-04-19 00:58:56,943 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 00:58:57,166 - INFO - Authentication (publickey) successful!
2025-04-19 00:58:57,319 - INFO - [install] Установка PostgreSQL на 192.168.1.74 (debian)
2025-04-19 00:58:57,319 - INFO - [install] Выполняется команда: sudo apt-get install -y lsb-release
2025-04-19 00:58:58,849 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет lsb-release самой новой версии (12.0-1).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-19 00:58:58,850 - INFO - [install] Выполняется команда: sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'
2025-04-19 00:58:59,011 - INFO - [install] Выполняется команда: wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
2025-04-19 00:59:02,434 - INFO - [install] OK
2025-04-19 00:59:02,436 - ERROR - [error] Warning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).
2025-04-19 00:59:02,437 - INFO - [install] Выполняется команда: sudo apt-get update
2025-04-19 00:59:06,933 - INFO - [install] Сущ:1 http://apt.postgresql.org/pub/repos/apt bookworm-pgdg InRelease
Сущ:2 http://security.debian.org/debian-security bookworm-security InRelease
Сущ:3 http://deb.debian.org/debian bookworm InRelease
Сущ:4 http://deb.debian.org/debian bookworm-updates InRelease
Чтение списков пакетов…
2025-04-19 00:59:06,936 - ERROR - [error] W: http://apt.postgresql.org/pub/repos/apt/dists/bookworm-pgdg/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.
2025-04-19 00:59:06,936 - INFO - [install] Выполняется команда: locale
2025-04-19 00:59:07,025 - INFO - [install] LANG=ru_RU.UTF-8
LANGUAGE=
LC_CTYPE="ru_RU.UTF-8"
LC_NUMERIC="ru_RU.UTF-8"
LC_TIME="ru_RU.UTF-8"
LC_COLLATE="ru_RU.UTF-8"
LC_MONETARY="ru_RU.UTF-8"
LC_MESSAGES="ru_RU.UTF-8"
LC_PAPER="ru_RU.UTF-8"
LC_NAME="ru_RU.UTF-8"
LC_ADDRESS="ru_RU.UTF-8"
LC_TELEPHONE="ru_RU.UTF-8"
LC_MEASUREMENT="ru_RU.UTF-8"
LC_IDENTIFICATION="ru_RU.UTF-8"
LC_ALL=
2025-04-19 00:59:07,025 - INFO - [install] Выполняется команда: export LC_CTYPE=ru_RU.UTF8
2025-04-19 00:59:07,140 - INFO - [install] Выполняется команда: export LC_COLLATE=ru_RU.UTF8
2025-04-19 00:59:07,227 - INFO - [install] Выполняется команда: locale -a | grep ru_RU
2025-04-19 00:59:07,327 - INFO - [install] ru_RU.utf8
2025-04-19 00:59:07,327 - INFO - [install] Выполняется команда: sudo locale-gen ru_RU.UTF8
2025-04-19 00:59:19,908 - INFO - [install] Generating locales (this might take a while)...
  ru_RU.UTF-8... done
Generation complete.
2025-04-19 00:59:19,909 - INFO - [install] Выполняется команда: sudo apt-get install -y postgresql-17
2025-04-19 00:59:21,469 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет postgresql-17 самой новой версии (17.4-1.pgdg120+2).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-19 00:59:21,469 - INFO - [install] Выполняется команда: sudo -u postgres psql -c 'SELECT version();'
2025-04-19 00:59:21,702 - INFO - [install] version                                                       
---------------------------------------------------------------------------------------------------------------------
 PostgreSQL 17.4 (Debian 17.4-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
(1 строка)
2025-04-19 00:59:21,704 - INFO - [install] Настройка доступа к PostgreSQL с 192.168.1.70
2025-04-19 00:59:21,704 - INFO - [install] Выполняется команда: sudo sed -i 's/^#listen_addresses =.*/listen_addresses = \'*\'/' /etc/postgresql/17/main/postgresql.conf || sudo sed -i 's/^#listen_addresses =.*/listen_addresses = \'*\'/' /var/lib/pgsql/17/data/postgresql.confecho "host    all             student         192.168.1.70/32         md5" | sudo tee -a /etc/postgresql/17/main/pg_hba.conf || echo "host    all             student         192.168.1.70/32         md5" | sudo tee -a /var/lib/pgsql/17/data/pg_hba.conf
2025-04-19 00:59:21,871 - ERROR - [error] bash: -c: строка 1: неожиданный конец файла во время поиска «'»
2025-04-19 00:59:21,871 - ERROR - [error] Команда завершилась с кодом 2
2025-04-19 00:59:21,871 - INFO - [install] Выполняется команда: sudo -u postgres psql -tc "SELECT 1 FROM pg_roles WHERE rolname='student'" | grep -q 1 || sudo -u postgres psql -c "CREATE ROLE student LOGIN PASSWORD 'student';"
2025-04-19 00:59:22,152 - INFO - [install] Выполняется команда: sudo systemctl restart postgresql
2025-04-19 00:59:26,189 - INFO - [install] Установка завершена успешно
2025-04-19 00:59:29,222 - ERROR - [connect] Не удалось подключиться к 192.168.1.70: [Errno None] Unable to connect to port 22 on 192.168.1.70
2025-04-19 00:59:29,225 - ERROR - [error] Проверка подключения student: SSH к 192.168.1.70 не удался
2025-04-19 01:01:32,238 - INFO - [connect] Введены хосты: 192.168.1.74,192.168.1.70
2025-04-19 01:01:32,238 - INFO - [connect] Путь к ключу: /home/niggermain/.ssh/id_ed25519
2025-04-19 01:01:32,294 - INFO - [connect] 192.168.1.74 доступен по SSH
2025-04-19 01:01:35,331 - WARNING - [connect] 192.168.1.70 недоступен
2025-04-19 01:01:35,426 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 01:01:35,609 - INFO - Authentication (publickey) successful!
2025-04-19 01:01:36,378 - INFO - [status] 192.168.1.74 CPU: 3.87%, RAM: 37.18%
2025-04-19 01:01:36,383 - INFO - [status] Выбран сервер для установки: 192.168.1.74
2025-04-19 01:01:36,501 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 01:01:36,641 - INFO - Authentication (publickey) successful!
2025-04-19 01:01:36,795 - INFO - [install] Установка PostgreSQL на 192.168.1.74 (debian)
2025-04-19 01:01:36,795 - INFO - [install] Выполняется команда: sudo apt-get install -y lsb-release
2025-04-19 01:01:38,624 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет lsb-release самой новой версии (12.0-1).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-19 01:01:38,624 - INFO - [install] Выполняется команда: sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'
2025-04-19 01:01:39,248 - INFO - [install] Выполняется команда: wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
2025-04-19 01:01:41,462 - INFO - [install] OK
2025-04-19 01:01:41,465 - ERROR - [error] Warning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).
2025-04-19 01:01:41,465 - INFO - [install] Выполняется команда: sudo apt-get update
2025-04-19 01:01:49,758 - INFO - [install] Сущ:1 http://deb.debian.org/debian bookworm InRelease
Сущ:2 http://apt.postgresql.org/pub/repos/apt bookworm-pgdg InRelease
Сущ:3 http://deb.debian.org/debian bookworm-updates InRelease
Сущ:4 http://security.debian.org/debian-security bookworm-security InRelease
Чтение списков пакетов…
2025-04-19 01:01:49,761 - ERROR - [error] W: http://apt.postgresql.org/pub/repos/apt/dists/bookworm-pgdg/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.
2025-04-19 01:01:49,761 - INFO - [install] Выполняется команда: locale
2025-04-19 01:01:49,853 - INFO - [install] LANG=ru_RU.UTF-8
LANGUAGE=
LC_CTYPE="ru_RU.UTF-8"
LC_NUMERIC="ru_RU.UTF-8"
LC_TIME="ru_RU.UTF-8"
LC_COLLATE="ru_RU.UTF-8"
LC_MONETARY="ru_RU.UTF-8"
LC_MESSAGES="ru_RU.UTF-8"
LC_PAPER="ru_RU.UTF-8"
LC_NAME="ru_RU.UTF-8"
LC_ADDRESS="ru_RU.UTF-8"
LC_TELEPHONE="ru_RU.UTF-8"
LC_MEASUREMENT="ru_RU.UTF-8"
LC_IDENTIFICATION="ru_RU.UTF-8"
LC_ALL=
2025-04-19 01:01:49,854 - INFO - [install] Выполняется команда: export LC_CTYPE=ru_RU.UTF8
2025-04-19 01:01:49,950 - INFO - [install] Выполняется команда: export LC_COLLATE=ru_RU.UTF8
2025-04-19 01:01:50,038 - INFO - [install] Выполняется команда: locale -a | grep ru_RU
2025-04-19 01:01:50,133 - INFO - [install] ru_RU.utf8
2025-04-19 01:01:50,133 - INFO - [install] Выполняется команда: sudo locale-gen ru_RU.UTF8
2025-04-19 01:02:02,453 - INFO - [install] Generating locales (this might take a while)...
  ru_RU.UTF-8... done
Generation complete.
2025-04-19 01:02:02,453 - INFO - [install] Выполняется команда: sudo apt-get install -y postgresql-17
2025-04-19 01:02:04,018 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет postgresql-17 самой новой версии (17.4-1.pgdg120+2).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-19 01:02:04,019 - INFO - [install] Выполняется команда: sudo -u postgres psql -c 'SELECT version();'
2025-04-19 01:02:04,337 - INFO - [install] version                                                       
---------------------------------------------------------------------------------------------------------------------
 PostgreSQL 17.4 (Debian 17.4-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
(1 строка)
2025-04-19 01:02:04,340 - INFO - [install] Настройка доступа к PostgreSQL с 192.168.1.70
2025-04-19 01:02:04,340 - INFO - [install] Выполняется команда: sudo sed -i 's/^#listen_addresses =.*/listen_addresses = \'*\' /etc/postgresql/17/main/postgresql.conf || sudo sed -i 's/^#listen_addresses =.*/listen_addresses = \'*\' /var/lib/pgsql/17/data/postgresql.confecho "host    all             student         192.168.1.70/32         md5" | sudo tee -a /etc/postgresql/17/main/pg_hba.conf || echo "host    all             student         192.168.1.70/32         md5" | sudo tee -a /var/lib/pgsql/17/data/pg_hba.conf
2025-04-19 01:02:04,506 - ERROR - [error] sed: -e выражение #1, символ 47: незавершенная команда `s'
sed: -e выражение #1, символ 47: незавершенная команда `s'
2025-04-19 01:02:04,507 - INFO - [install] Выполняется команда: sudo -u postgres psql -tc "SELECT 1 FROM pg_roles WHERE rolname='student'" | grep -q 1 || sudo -u postgres psql -c "CREATE ROLE student LOGIN PASSWORD 'student';"
2025-04-19 01:02:04,773 - INFO - [install] Выполняется команда: sudo systemctl restart postgresql
2025-04-19 01:02:08,761 - INFO - [install] Установка завершена успешно
2025-04-19 01:02:11,809 - ERROR - [connect] Не удалось подключиться к 192.168.1.70: [Errno None] Unable to connect to port 22 on 192.168.1.70
2025-04-19 01:02:11,812 - ERROR - [error] Проверка подключения student: SSH к 192.168.1.70 не удался
2025-04-19 01:22:49,342 - INFO - [connect] Введены хосты: 192.168.1.74,192.168.1.70
2025-04-19 01:22:49,358 - INFO - [connect] Путь к ключу: /home/niggermain/.ssh/id_ed25519
2025-04-19 01:22:52,417 - WARNING - [connect] 192.168.1.74 недоступен
2025-04-19 01:22:55,448 - WARNING - [connect] 192.168.1.70 недоступен
2025-04-19 01:22:55,453 - WARNING - [error] Нет доступных серверов
2025-04-19 01:23:10,612 - INFO - [connect] Введены хосты: 192.168.1.74,192.168.1.70
2025-04-19 01:23:10,613 - INFO - [connect] Путь к ключу: /home/niggermain/.ssh/id_ed25519
2025-04-19 01:23:10,661 - INFO - [connect] 192.168.1.74 доступен по SSH
2025-04-19 01:23:13,714 - WARNING - [connect] 192.168.1.70 недоступен
2025-04-19 01:23:13,806 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 01:23:14,285 - INFO - Authentication (publickey) successful!
2025-04-19 01:23:14,925 - INFO - [status] 192.168.1.74 CPU: 3.83%, RAM: 33.52%
2025-04-19 01:23:14,933 - INFO - [status] Выбран сервер для установки: 192.168.1.74
2025-04-19 01:23:15,031 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 01:23:15,338 - INFO - Authentication (publickey) successful!
2025-04-19 01:23:15,525 - INFO - [install] Установка PostgreSQL на 192.168.1.74 (debian)
2025-04-19 01:23:15,525 - INFO - [install] Выполняется команда: sudo apt-get install -y lsb-release
2025-04-19 01:23:17,053 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет lsb-release самой новой версии (12.0-1).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-19 01:23:17,053 - INFO - [install] Выполняется команда: sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'
2025-04-19 01:23:17,223 - INFO - [install] Выполняется команда: wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
2025-04-19 01:23:19,486 - INFO - [install] OK
2025-04-19 01:23:19,489 - ERROR - [error] Warning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).
2025-04-19 01:23:19,489 - INFO - [install] Выполняется команда: sudo apt-get update
2025-04-19 01:23:24,273 - INFO - [install] Сущ:1 http://apt.postgresql.org/pub/repos/apt bookworm-pgdg InRelease
Сущ:2 http://deb.debian.org/debian bookworm InRelease
Сущ:3 http://security.debian.org/debian-security bookworm-security InRelease
Сущ:4 http://deb.debian.org/debian bookworm-updates InRelease
Чтение списков пакетов…
2025-04-19 01:23:24,276 - ERROR - [error] W: http://apt.postgresql.org/pub/repos/apt/dists/bookworm-pgdg/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.
2025-04-19 01:23:24,276 - INFO - [install] Выполняется команда: locale
2025-04-19 01:23:24,468 - INFO - [install] LANG=ru_RU.UTF-8
LANGUAGE=
LC_CTYPE="ru_RU.UTF-8"
LC_NUMERIC="ru_RU.UTF-8"
LC_TIME="ru_RU.UTF-8"
LC_COLLATE="ru_RU.UTF-8"
LC_MONETARY="ru_RU.UTF-8"
LC_MESSAGES="ru_RU.UTF-8"
LC_PAPER="ru_RU.UTF-8"
LC_NAME="ru_RU.UTF-8"
LC_ADDRESS="ru_RU.UTF-8"
LC_TELEPHONE="ru_RU.UTF-8"
LC_MEASUREMENT="ru_RU.UTF-8"
LC_IDENTIFICATION="ru_RU.UTF-8"
LC_ALL=
2025-04-19 01:23:24,469 - INFO - [install] Выполняется команда: export LC_CTYPE=ru_RU.UTF8
2025-04-19 01:23:24,803 - INFO - [install] Выполняется команда: export LC_COLLATE=ru_RU.UTF8
2025-04-19 01:23:24,913 - INFO - [install] Выполняется команда: locale -a | grep ru_RU
2025-04-19 01:23:25,081 - INFO - [install] ru_RU.utf8
2025-04-19 01:23:25,082 - INFO - [install] Выполняется команда: sudo locale-gen ru_RU.UTF8
2025-04-19 01:23:37,508 - INFO - [install] Generating locales (this might take a while)...
  ru_RU.UTF-8... done
Generation complete.
2025-04-19 01:23:37,508 - INFO - [install] Выполняется команда: sudo apt-get install -y postgresql-17
2025-04-19 01:23:39,061 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет postgresql-17 самой новой версии (17.4-1.pgdg120+2).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-19 01:23:39,061 - INFO - [install] Выполняется команда: sudo -u postgres psql -c 'SELECT version();'
2025-04-19 01:23:39,301 - INFO - [install] version                                                       
---------------------------------------------------------------------------------------------------------------------
 PostgreSQL 17.4 (Debian 17.4-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
(1 строка)
2025-04-19 01:23:39,304 - INFO - [install] Настройка доступа к PostgreSQL с 192.168.1.70
2025-04-19 01:23:39,304 - INFO - [install] Выполняется команда: sudo sed -i 's/#listen_addresses = \'localhost\'/listen_addresses = \'*\' /etc/postgresql/17/main/postgresql.conf echo "host    all             student         192.168.1.70/32         md5" | sudo tee -a /etc/postgresql/17/main/pg_hba.conf || echo "host    all             student         192.168.1.70/32         md5" | sudo tee -a /var/lib/pgsql/17/data/pg_hba.conf
2025-04-19 01:23:39,461 - ERROR - [error] sed: -e выражение #1, символ 50: незавершенная команда `s'
2025-04-19 01:23:39,461 - INFO - [install] Выполняется команда: sudo -u postgres psql -tc "SELECT 1 FROM pg_roles WHERE rolname='student'" | grep -q 1 || sudo -u postgres psql -c "CREATE ROLE student LOGIN PASSWORD 'student';"
2025-04-19 01:23:39,723 - INFO - [install] Выполняется команда: sudo systemctl restart postgresql
2025-04-19 01:23:43,502 - INFO - [install] Установка завершена успешно
2025-04-19 01:23:46,540 - ERROR - [connect] Не удалось подключиться к 192.168.1.70: [Errno None] Unable to connect to port 22 on 192.168.1.70
2025-04-19 01:23:46,543 - ERROR - [error] Проверка подключения student: SSH к 192.168.1.70 не удался
2025-04-19 01:25:19,760 - INFO - [connect] Введены хосты: 192.168.1.74,192.168.1.70
2025-04-19 01:25:19,761 - INFO - [connect] Путь к ключу: /home/niggermain/.ssh/id_ed25519
2025-04-19 01:25:19,779 - INFO - [connect] 192.168.1.74 доступен по SSH
2025-04-19 01:25:22,808 - WARNING - [connect] 192.168.1.70 недоступен
2025-04-19 01:25:22,883 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 01:25:23,027 - INFO - Authentication (publickey) successful!
2025-04-19 01:25:23,910 - INFO - [status] 192.168.1.74 CPU: 3.86%, RAM: 33.62%
2025-04-19 01:25:23,915 - INFO - [status] Выбран сервер для установки: 192.168.1.74
2025-04-19 01:25:23,979 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 01:25:24,236 - INFO - Authentication (publickey) successful!
2025-04-19 01:25:24,351 - INFO - [install] Установка PostgreSQL на 192.168.1.74 (debian)
2025-04-19 01:25:24,352 - INFO - [install] Выполняется команда: sudo apt-get install -y lsb-release
2025-04-19 01:25:25,876 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет lsb-release самой новой версии (12.0-1).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-19 01:25:25,876 - INFO - [install] Выполняется команда: sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'
2025-04-19 01:25:26,034 - INFO - [install] Выполняется команда: wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
2025-04-19 01:25:28,300 - INFO - [install] OK
2025-04-19 01:25:28,303 - ERROR - [error] Warning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).
2025-04-19 01:25:28,303 - INFO - [install] Выполняется команда: sudo apt-get update
2025-04-19 01:25:37,550 - INFO - [install] Сущ:1 http://apt.postgresql.org/pub/repos/apt bookworm-pgdg InRelease
Сущ:2 http://security.debian.org/debian-security bookworm-security InRelease
Сущ:3 http://deb.debian.org/debian bookworm InRelease
Сущ:4 http://deb.debian.org/debian bookworm-updates InRelease
Чтение списков пакетов…
2025-04-19 01:25:37,553 - ERROR - [error] W: http://apt.postgresql.org/pub/repos/apt/dists/bookworm-pgdg/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.
2025-04-19 01:25:37,554 - INFO - [install] Выполняется команда: locale
2025-04-19 01:25:37,659 - INFO - [install] LANG=ru_RU.UTF-8
LANGUAGE=
LC_CTYPE="ru_RU.UTF-8"
LC_NUMERIC="ru_RU.UTF-8"
LC_TIME="ru_RU.UTF-8"
LC_COLLATE="ru_RU.UTF-8"
LC_MONETARY="ru_RU.UTF-8"
LC_MESSAGES="ru_RU.UTF-8"
LC_PAPER="ru_RU.UTF-8"
LC_NAME="ru_RU.UTF-8"
LC_ADDRESS="ru_RU.UTF-8"
LC_TELEPHONE="ru_RU.UTF-8"
LC_MEASUREMENT="ru_RU.UTF-8"
LC_IDENTIFICATION="ru_RU.UTF-8"
LC_ALL=
2025-04-19 01:25:37,659 - INFO - [install] Выполняется команда: export LC_CTYPE=ru_RU.UTF8
2025-04-19 01:25:37,768 - INFO - [install] Выполняется команда: export LC_COLLATE=ru_RU.UTF8
2025-04-19 01:25:37,844 - INFO - [install] Выполняется команда: locale -a | grep ru_RU
2025-04-19 01:25:37,927 - INFO - [install] ru_RU.utf8
2025-04-19 01:25:37,927 - INFO - [install] Выполняется команда: sudo locale-gen ru_RU.UTF8
2025-04-19 01:25:50,221 - INFO - [install] Generating locales (this might take a while)...
  ru_RU.UTF-8... done
Generation complete.
2025-04-19 01:25:50,221 - INFO - [install] Выполняется команда: sudo apt-get install -y postgresql-17
2025-04-19 01:25:51,791 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет postgresql-17 самой новой версии (17.4-1.pgdg120+2).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-19 01:25:51,791 - INFO - [install] Выполняется команда: sudo -u postgres psql -c 'SELECT version();'
2025-04-19 01:25:52,033 - INFO - [install] version                                                       
---------------------------------------------------------------------------------------------------------------------
 PostgreSQL 17.4 (Debian 17.4-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
(1 строка)
2025-04-19 01:25:52,035 - INFO - [install] Настройка доступа к PostgreSQL с 192.168.1.70
2025-04-19 01:25:52,035 - INFO - [install] Выполняется команда: sudo sed -i 's/#listen_addresses = \'localhost\'/listen_addresses = \'*\'/g' /etc/postgresql/17/main/postgresql.confecho "host    all             student         192.168.1.70/32         md5" | sudo tee -a /etc/postgresql/17/main/pg_hba.conf || echo "host    all             student         192.168.1.70/32         md5" | sudo tee -a /var/lib/pgsql/17/data/pg_hba.conf
2025-04-19 01:25:52,133 - ERROR - [error] bash: -c: строка 1: неожиданный конец файла во время поиска «'»
2025-04-19 01:25:52,133 - ERROR - [error] Команда завершилась с кодом 2
2025-04-19 01:25:52,133 - INFO - [install] Выполняется команда: sudo -u postgres psql -tc "SELECT 1 FROM pg_roles WHERE rolname='student'" | grep -q 1 || sudo -u postgres psql -c "CREATE ROLE student LOGIN PASSWORD 'student';"
2025-04-19 01:25:52,661 - INFO - [install] Выполняется команда: sudo systemctl restart postgresql
2025-04-19 01:25:56,413 - INFO - [install] Установка завершена успешно
2025-04-19 01:25:59,447 - ERROR - [connect] Не удалось подключиться к 192.168.1.70: [Errno None] Unable to connect to port 22 on 192.168.1.70
2025-04-19 01:25:59,450 - ERROR - [error] Проверка подключения student: SSH к 192.168.1.70 не удался
2025-04-19 01:26:51,981 - INFO - [connect] Введены хосты: 192.168.1.74,192.168.1.70
2025-04-19 01:26:51,981 - INFO - [connect] Путь к ключу: /home/niggermain/.ssh/id_ed25519
2025-04-19 01:26:52,005 - INFO - [connect] 192.168.1.74 доступен по SSH
2025-04-19 01:26:55,049 - WARNING - [connect] 192.168.1.70 недоступен
2025-04-19 01:26:55,115 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 01:26:55,241 - INFO - Authentication (publickey) successful!
2025-04-19 01:26:55,956 - INFO - [status] 192.168.1.74 CPU: 3.88%, RAM: 33.83%
2025-04-19 01:26:55,965 - INFO - [status] Выбран сервер для установки: 192.168.1.74
2025-04-19 01:26:56,036 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 01:26:56,318 - INFO - Authentication (publickey) successful!
2025-04-19 01:26:56,502 - INFO - [install] Установка PostgreSQL на 192.168.1.74 (debian)
2025-04-19 01:26:56,503 - INFO - [install] Выполняется команда: sudo apt-get install -y lsb-release
2025-04-19 01:26:58,042 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет lsb-release самой новой версии (12.0-1).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-19 01:26:58,043 - INFO - [install] Выполняется команда: sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'
2025-04-19 01:26:59,190 - INFO - [install] Выполняется команда: wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
2025-04-19 01:27:01,332 - INFO - [install] OK
2025-04-19 01:27:01,334 - ERROR - [error] Warning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).
2025-04-19 01:27:01,334 - INFO - [install] Выполняется команда: sudo apt-get update
2025-04-19 01:27:06,013 - INFO - [install] Сущ:1 http://apt.postgresql.org/pub/repos/apt bookworm-pgdg InRelease
Сущ:2 http://deb.debian.org/debian bookworm InRelease
Сущ:3 http://deb.debian.org/debian bookworm-updates InRelease
Сущ:4 http://security.debian.org/debian-security bookworm-security InRelease
Чтение списков пакетов…
2025-04-19 01:27:06,016 - ERROR - [error] W: http://apt.postgresql.org/pub/repos/apt/dists/bookworm-pgdg/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.
2025-04-19 01:27:06,016 - INFO - [install] Выполняется команда: locale
2025-04-19 01:27:06,102 - INFO - [install] LANG=ru_RU.UTF-8
LANGUAGE=
LC_CTYPE="ru_RU.UTF-8"
LC_NUMERIC="ru_RU.UTF-8"
LC_TIME="ru_RU.UTF-8"
LC_COLLATE="ru_RU.UTF-8"
LC_MONETARY="ru_RU.UTF-8"
LC_MESSAGES="ru_RU.UTF-8"
LC_PAPER="ru_RU.UTF-8"
LC_NAME="ru_RU.UTF-8"
LC_ADDRESS="ru_RU.UTF-8"
LC_TELEPHONE="ru_RU.UTF-8"
LC_MEASUREMENT="ru_RU.UTF-8"
LC_IDENTIFICATION="ru_RU.UTF-8"
LC_ALL=
2025-04-19 01:27:06,104 - INFO - [install] Выполняется команда: export LC_CTYPE=ru_RU.UTF8
2025-04-19 01:27:06,209 - INFO - [install] Выполняется команда: export LC_COLLATE=ru_RU.UTF8
2025-04-19 01:27:06,301 - INFO - [install] Выполняется команда: locale -a | grep ru_RU
2025-04-19 01:27:06,399 - INFO - [install] ru_RU.utf8
2025-04-19 01:27:06,400 - INFO - [install] Выполняется команда: sudo locale-gen ru_RU.UTF8
2025-04-19 01:27:18,789 - INFO - [install] Generating locales (this might take a while)...
  ru_RU.UTF-8... done
Generation complete.
2025-04-19 01:27:18,789 - INFO - [install] Выполняется команда: sudo apt-get install -y postgresql-17
2025-04-19 01:27:20,353 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет postgresql-17 самой новой версии (17.4-1.pgdg120+2).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-19 01:27:20,353 - INFO - [install] Выполняется команда: sudo -u postgres psql -c 'SELECT version();'
2025-04-19 01:27:20,599 - INFO - [install] version                                                       
---------------------------------------------------------------------------------------------------------------------
 PostgreSQL 17.4 (Debian 17.4-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
(1 строка)
2025-04-19 01:27:20,601 - INFO - [install] Настройка доступа к PostgreSQL с 192.168.1.70
2025-04-19 01:27:20,601 - INFO - [install] Выполняется команда: sudo sed -i 's/#listen_addresses = \'localhost\' /listen_addresses = \'*\'/g' /etc/postgresql/17/main/postgresql.confecho "host    all             student         192.168.1.70/32         md5" | sudo tee -a /etc/postgresql/17/main/pg_hba.conf || echo "host    all             student         192.168.1.70/32         md5" | sudo tee -a /var/lib/pgsql/17/data/pg_hba.conf
2025-04-19 01:27:20,703 - ERROR - [error] bash: -c: строка 1: неожиданный конец файла во время поиска «'»
2025-04-19 01:27:20,703 - ERROR - [error] Команда завершилась с кодом 2
2025-04-19 01:27:20,704 - INFO - [install] Выполняется команда: sudo -u postgres psql -tc "SELECT 1 FROM pg_roles WHERE rolname='student'" | grep -q 1 || sudo -u postgres psql -c "CREATE ROLE student LOGIN PASSWORD 'student';"
2025-04-19 01:27:20,974 - INFO - [install] Выполняется команда: sudo systemctl restart postgresql
2025-04-19 01:27:24,730 - INFO - [install] Установка завершена успешно
2025-04-19 01:27:27,767 - ERROR - [connect] Не удалось подключиться к 192.168.1.70: [Errno None] Unable to connect to port 22 on 192.168.1.70
2025-04-19 01:27:27,769 - ERROR - [error] Проверка подключения student: SSH к 192.168.1.70 не удался
2025-04-19 01:30:27,218 - INFO - [connect] Введены хосты: 192.168.1.74,192.168.1.70
2025-04-19 01:30:27,218 - INFO - [connect] Путь к ключу: /home/niggermain/.ssh/id_ed25519
2025-04-19 01:30:32,235 - WARNING - [connect] 192.168.1.74 недоступен
2025-04-19 01:30:35,288 - WARNING - [connect] 192.168.1.70 недоступен
2025-04-19 01:30:35,294 - WARNING - [error] Нет доступных серверов
2025-04-19 01:30:48,137 - INFO - [connect] Введены хосты: 192.168.1.74,192.168.1.70
2025-04-19 01:30:48,137 - INFO - [connect] Путь к ключу: /home/niggermain/.ssh/id_ed25519
2025-04-19 01:30:48,188 - INFO - [connect] 192.168.1.74 доступен по SSH
2025-04-19 01:30:51,237 - WARNING - [connect] 192.168.1.70 недоступен
2025-04-19 01:30:51,297 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 01:30:51,508 - INFO - Authentication (publickey) successful!
2025-04-19 01:30:52,145 - INFO - [status] 192.168.1.74 CPU: 3.91%, RAM: 34.49%
2025-04-19 01:30:52,150 - INFO - [status] Выбран сервер для установки: 192.168.1.74
2025-04-19 01:30:52,225 - INFO - Connected (version 2.0, client OpenSSH_9.2p1)
2025-04-19 01:30:52,394 - INFO - Authentication (publickey) successful!
2025-04-19 01:30:52,586 - INFO - [install] Установка PostgreSQL на 192.168.1.74 (debian)
2025-04-19 01:30:52,586 - INFO - [install] Выполняется команда: sudo apt-get install -y lsb-release
2025-04-19 01:30:54,138 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет lsb-release самой новой версии (12.0-1).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-19 01:30:54,139 - INFO - [install] Выполняется команда: sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'
2025-04-19 01:30:54,296 - INFO - [install] Выполняется команда: wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
2025-04-19 01:30:56,493 - INFO - [install] OK
2025-04-19 01:30:56,495 - ERROR - [error] Warning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).
2025-04-19 01:30:56,496 - INFO - [install] Выполняется команда: sudo apt-get update
2025-04-19 01:31:00,984 - INFO - [install] Сущ:1 http://security.debian.org/debian-security bookworm-security InRelease
Сущ:2 http://apt.postgresql.org/pub/repos/apt bookworm-pgdg InRelease
Сущ:3 http://deb.debian.org/debian bookworm InRelease
Сущ:4 http://deb.debian.org/debian bookworm-updates InRelease
Чтение списков пакетов…
2025-04-19 01:31:00,987 - ERROR - [error] W: http://apt.postgresql.org/pub/repos/apt/dists/bookworm-pgdg/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.
2025-04-19 01:31:00,987 - INFO - [install] Выполняется команда: locale
2025-04-19 01:31:01,077 - INFO - [install] LANG=ru_RU.UTF-8
LANGUAGE=
LC_CTYPE="ru_RU.UTF-8"
LC_NUMERIC="ru_RU.UTF-8"
LC_TIME="ru_RU.UTF-8"
LC_COLLATE="ru_RU.UTF-8"
LC_MONETARY="ru_RU.UTF-8"
LC_MESSAGES="ru_RU.UTF-8"
LC_PAPER="ru_RU.UTF-8"
LC_NAME="ru_RU.UTF-8"
LC_ADDRESS="ru_RU.UTF-8"
LC_TELEPHONE="ru_RU.UTF-8"
LC_MEASUREMENT="ru_RU.UTF-8"
LC_IDENTIFICATION="ru_RU.UTF-8"
LC_ALL=
2025-04-19 01:31:01,077 - INFO - [install] Выполняется команда: export LC_CTYPE=ru_RU.UTF8
2025-04-19 01:31:01,185 - INFO - [install] Выполняется команда: export LC_COLLATE=ru_RU.UTF8
2025-04-19 01:31:01,317 - INFO - [install] Выполняется команда: locale -a | grep ru_RU
2025-04-19 01:31:01,422 - INFO - [install] ru_RU.utf8
2025-04-19 01:31:01,422 - INFO - [install] Выполняется команда: sudo locale-gen ru_RU.UTF8
2025-04-19 01:31:13,780 - INFO - [install] Generating locales (this might take a while)...
  ru_RU.UTF-8... done
Generation complete.
2025-04-19 01:31:13,781 - INFO - [install] Выполняется команда: sudo apt-get install -y postgresql-17
2025-04-19 01:31:15,357 - INFO - [install] Чтение списков пакетов…
Построение дерева зависимостей…
Чтение информации о состоянии…
Уже установлен пакет postgresql-17 самой новой версии (17.4-1.pgdg120+2).
Обновлено 0 пакетов, установлено 0 новых пакетов, для удаления отмечено 0 пакетов, и 0 пакетов не обновлено.
2025-04-19 01:31:15,358 - INFO - [install] Выполняется команда: sudo -u postgres psql -c 'SELECT version();'
2025-04-19 01:31:15,594 - INFO - [install] version                                                       
---------------------------------------------------------------------------------------------------------------------
 PostgreSQL 17.4 (Debian 17.4-1.pgdg120+2) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14) 12.2.0, 64-bit
(1 строка)
2025-04-19 01:31:15,597 - INFO - [install] Настройка доступа к PostgreSQL с 192.168.1.70
2025-04-19 01:31:15,597 - INFO - [install] Выполняется команда: sudo sed -i 's/#listen_addresses = \'localhost\'/listen_addresses = \'*\'/g' /etc/postgresql/17/main/postgresql.confecho "host    all             student         192.168.1.70/32         md5" | sudo tee -a /etc/postgresql/17/main/pg_hba.conf || echo "host    all             student         192.168.1.70/32         md5" | sudo tee -a /var/lib/pgsql/17/data/pg_hba.conf
2025-04-19 01:31:15,774 - ERROR - [error] bash: -c: строка 1: неожиданный конец файла во время поиска «'»
2025-04-19 01:31:15,774 - ERROR - [error] Команда завершилась с кодом 2
2025-04-19 01:31:15,775 - INFO - [install] Выполняется команда: sudo -u postgres psql -tc "SELECT 1 FROM pg_roles WHERE rolname='student'" | grep -q 1 || sudo -u postgres psql -c "CREATE ROLE student LOGIN PASSWORD 'student';"
2025-04-19 01:31:16,042 - INFO - [install] Выполняется команда: sudo systemctl restart postgresql
2025-04-19 01:31:19,923 - INFO - [install] Установка завершена успешно
2025-04-19 01:31:22,967 - ERROR - [connect] Не удалось подключиться к 192.168.1.70: [Errno None] Unable to connect to port 22 on 192.168.1.70
2025-04-19 01:31:22,969 - ERROR - [error] Проверка подключения student: SSH к 192.168.1.70 не удался
